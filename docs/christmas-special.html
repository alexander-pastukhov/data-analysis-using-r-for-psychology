<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Seminar 10 Christmas special | Data analysis using R for Psychology and Social Science</title>
  <meta name="description" content="Material and exercises for ‘Applied data analysis for psychology using the open-source software R’ seminar." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Seminar 10 Christmas special | Data analysis using R for Psychology and Social Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Material and exercises for ‘Applied data analysis for psychology using the open-source software R’ seminar." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Seminar 10 Christmas special | Data analysis using R for Psychology and Social Science" />
  
  <meta name="twitter:description" content="Material and exercises for ‘Applied data analysis for psychology using the open-source software R’ seminar." />
  

<meta name="author" content="Alexander (Sasha) Pastukhov" />


<meta name="date" content="2021-12-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="controling-computation-flow.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="font-awesome.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data analysis using R for Psychology</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-r"><i class="fa fa-check"></i>Why R?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-tidyverse"><i class="fa fa-check"></i>Why Tidyverse</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-seminar"><i class="fa fa-check"></i>About the seminar</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#thinking-like-a-computer"><i class="fa fa-check"></i>Thinking like a computer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-material"><i class="fa fa-check"></i>About the material</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="software.html"><a href="software.html"><i class="fa fa-check"></i>Software</a>
<ul>
<li class="chapter" data-level="0.1" data-path="software.html"><a href="software.html#install-r"><i class="fa fa-check"></i><b>0.1</b> Installing R</a></li>
<li class="chapter" data-level="0.2" data-path="software.html"><a href="software.html#install-rstudio"><i class="fa fa-check"></i><b>0.2</b> Installing R-Studio</a></li>
<li class="chapter" data-level="0.3" data-path="software.html"><a href="software.html#install-rtools"><i class="fa fa-check"></i><b>0.3</b> Installing RTools</a></li>
<li class="chapter" data-level="" data-path="software.html"><a href="software.html#install.packages"><i class="fa fa-check"></i>Installing packages</a></li>
<li class="chapter" data-level="0.4" data-path="software.html"><a href="software.html#minimal-set-of-packages"><i class="fa fa-check"></i><b>0.4</b> Minimal set of packages</a></li>
<li class="chapter" data-level="0.5" data-path="software.html"><a href="software.html#installr"><i class="fa fa-check"></i><b>0.5</b> Keeping R and packages up-to-date</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="reproducable-research.html"><a href="reproducable-research.html"><i class="fa fa-check"></i><b>1</b> Reproducable Research: Projects and RMarkdown Notebooks</a>
<ul>
<li class="chapter" data-level="1.1" data-path="reproducable-research.html"><a href="reproducable-research.html#projects"><i class="fa fa-check"></i><b>1.1</b> Projects</a></li>
<li class="chapter" data-level="1.2" data-path="reproducable-research.html"><a href="reproducable-research.html#rmarkdown"><i class="fa fa-check"></i><b>1.2</b> RMarkdown</a></li>
<li class="chapter" data-level="1.3" data-path="reproducable-research.html"><a href="reproducable-research.html#exercise"><i class="fa fa-check"></i><b>1.3</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>2</b> Vectors! Vectors everywhere!</a>
<ul>
<li class="chapter" data-level="2.1" data-path="vectors.html"><a href="vectors.html#variables"><i class="fa fa-check"></i><b>2.1</b> Variables as boxes</a></li>
<li class="chapter" data-level="2.2" data-path="vectors.html"><a href="vectors.html#assignment-statement"><i class="fa fa-check"></i><b>2.2</b> Assignment statement in detail</a></li>
<li class="chapter" data-level="2.3" data-path="vectors.html"><a href="vectors.html#vectors-scalars"><i class="fa fa-check"></i><b>2.3</b> Vectors and singluar values (scalars, which are also vectors)</a></li>
<li class="chapter" data-level="2.4" data-path="vectors.html"><a href="vectors.html#vector-index"><i class="fa fa-check"></i><b>2.4</b> Vector indexes (subsetting)</a></li>
<li class="chapter" data-level="2.5" data-path="vectors.html"><a href="vectors.html#names"><i class="fa fa-check"></i><b>2.5</b> Names as an Index</a></li>
<li class="chapter" data-level="2.6" data-path="vectors.html"><a href="vectors.html#vector-index-slicing"><i class="fa fa-check"></i><b>2.6</b> Slicing</a></li>
<li class="chapter" data-level="2.7" data-path="vectors.html"><a href="vectors.html#colon-sequence"><i class="fa fa-check"></i><b>2.7</b> Colon Operator and Sequence Generation</a></li>
<li class="chapter" data-level="2.8" data-path="vectors.html"><a href="vectors.html#working-with-two-vectors-of-equal-length"><i class="fa fa-check"></i><b>2.8</b> Working with two vectors of <em>equal</em> length</a></li>
<li class="chapter" data-level="2.9" data-path="vectors.html"><a href="vectors.html#different-length-vectors"><i class="fa fa-check"></i><b>2.9</b> Working with two vectors of <em>different</em> length</a></li>
<li class="chapter" data-level="2.10" data-path="vectors.html"><a href="vectors.html#applying-functions-to-a-vector"><i class="fa fa-check"></i><b>2.10</b> Applying functions to a vector</a></li>
<li class="chapter" data-level="2.11" data-path="vectors.html"><a href="vectors.html#wrap-up"><i class="fa fa-check"></i><b>2.11</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>3</b> Tables and Tibbles (and Tribbles)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tables.html"><a href="tables.html#primary-types"><i class="fa fa-check"></i><b>3.1</b> Primary data types</a></li>
<li class="chapter" data-level="3.2" data-path="tables.html"><a href="tables.html#vectors-are-homogeneous"><i class="fa fa-check"></i><b>3.2</b> All vector values must be of the same type</a></li>
<li class="chapter" data-level="3.3" data-path="tables.html"><a href="tables.html#lists"><i class="fa fa-check"></i><b>3.3</b> Lists</a></li>
<li class="chapter" data-level="3.4" data-path="tables.html"><a href="tables.html#subsetting"><i class="fa fa-check"></i><b>3.4</b> Subsetting, a fuller version</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="tables.html"><a href="tables.html#subsetting-for-atomics-vectors"><i class="fa fa-check"></i><b>3.4.1</b> Subsetting for (atomics) vectors</a></li>
<li class="chapter" data-level="3.4.2" data-path="tables.html"><a href="tables.html#subsetting-for-lists"><i class="fa fa-check"></i><b>3.4.2</b> Subsetting for lists</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="tables.html"><a href="tables.html#dollar-subsetting"><i class="fa fa-check"></i><b>3.5</b> Yet another subsetting via $</a></li>
<li class="chapter" data-level="3.6" data-path="tables.html"><a href="tables.html#data.frame"><i class="fa fa-check"></i><b>3.6</b> Tables, a.k.a. data frames</a></li>
<li class="chapter" data-level="3.7" data-path="tables.html"><a href="tables.html#table-subsetting"><i class="fa fa-check"></i><b>3.7</b> Subsetting tables</a></li>
<li class="chapter" data-level="3.8" data-path="tables.html"><a href="tables.html#library"><i class="fa fa-check"></i><b>3.8</b> Using libraries</a></li>
<li class="chapter" data-level="3.9" data-path="tables.html"><a href="tables.html#tibble"><i class="fa fa-check"></i><b>3.9</b> Tibble, a better data.frame</a></li>
<li class="chapter" data-level="3.10" data-path="tables.html"><a href="tables.html#tribble"><i class="fa fa-check"></i><b>3.10</b> Tribble, table from text</a></li>
<li class="chapter" data-level="3.11" data-path="tables.html"><a href="tables.html#data"><i class="fa fa-check"></i><b>3.11</b> Reading example tables</a></li>
<li class="chapter" data-level="3.12" data-path="tables.html"><a href="tables.html#readr"><i class="fa fa-check"></i><b>3.12</b> Reading csv files</a></li>
<li class="chapter" data-level="3.13" data-path="tables.html"><a href="tables.html#readxl"><i class="fa fa-check"></i><b>3.13</b> Reading Excel files</a></li>
<li class="chapter" data-level="3.14" data-path="tables.html"><a href="tables.html#reading-files-from-other-programs"><i class="fa fa-check"></i><b>3.14</b> Reading files from other programs</a></li>
<li class="chapter" data-level="3.15" data-path="tables.html"><a href="tables.html#rds"><i class="fa fa-check"></i><b>3.15</b> Writing and reading a single object</a></li>
<li class="chapter" data-level="3.16" data-path="tables.html"><a href="tables.html#wrap-up-1"><i class="fa fa-check"></i><b>3.16</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>4</b> Functions! Functions everywhere!</a>
<ul>
<li class="chapter" data-level="4.1" data-path="functions.html"><a href="functions.html#functions-1"><i class="fa fa-check"></i><b>4.1</b> Functions</a></li>
<li class="chapter" data-level="4.2" data-path="functions.html"><a href="functions.html#writing-a-function"><i class="fa fa-check"></i><b>4.2</b> Writing a function</a></li>
<li class="chapter" data-level="4.3" data-path="functions.html"><a href="functions.html#scopes-global-versus-local-variables"><i class="fa fa-check"></i><b>4.3</b> Scopes: Global versus Local variables</a></li>
<li class="chapter" data-level="4.4" data-path="functions.html"><a href="functions.html#function-with-two-parameters"><i class="fa fa-check"></i><b>4.4</b> Function with two parameters</a></li>
<li class="chapter" data-level="4.5" data-path="functions.html"><a href="functions.html#table-as-a-parameter"><i class="fa fa-check"></i><b>4.5</b> Table as a parameter</a></li>
<li class="chapter" data-level="4.6" data-path="functions.html"><a href="functions.html#named-versus-positional-arguments"><i class="fa fa-check"></i><b>4.6</b> Named versus positional arguments</a></li>
<li class="chapter" data-level="4.7" data-path="functions.html"><a href="functions.html#default-values"><i class="fa fa-check"></i><b>4.7</b> Default values</a></li>
<li class="chapter" data-level="4.8" data-path="functions.html"><a href="functions.html#nested-calls"><i class="fa fa-check"></i><b>4.8</b> Nested calls</a></li>
<li class="chapter" data-level="4.9" data-path="functions.html"><a href="functions.html#pipe"><i class="fa fa-check"></i><b>4.9</b> Piping</a></li>
<li class="chapter" data-level="4.10" data-path="functions.html"><a href="functions.html#function-is-just-a-code-stored-in-a-variable"><i class="fa fa-check"></i><b>4.10</b> Function is just a code stored in a variable</a></li>
<li class="chapter" data-level="4.11" data-path="functions.html"><a href="functions.html#functions-functions-everywhere"><i class="fa fa-check"></i><b>4.11</b> Functions! Functions everywhere!</a></li>
<li class="chapter" data-level="4.12" data-path="functions.html"><a href="functions.html#using-or-not-using-explicit-return-statement"><i class="fa fa-check"></i><b>4.12</b> Using (or not using) explicit return statement</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>5</b> Grammar of Graphics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ggplot2.html"><a href="ggplot2.html#tidydata"><i class="fa fa-check"></i><b>5.1</b> Tidy data</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-1"><i class="fa fa-check"></i><b>5.2</b> ggplot2</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot2.html"><a href="ggplot2.html#auto-efficiency-continuous-x-axis"><i class="fa fa-check"></i><b>5.3</b> Auto efficiency: continuous x-axis</a></li>
<li class="chapter" data-level="5.4" data-path="ggplot2.html"><a href="ggplot2.html#auto-efficiency-discrete-x-axis"><i class="fa fa-check"></i><b>5.4</b> Auto efficiency: discrete x-axis</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot2.html"><a href="ggplot2.html#mammals-sleep-single-variable"><i class="fa fa-check"></i><b>5.5</b> Mammals sleep: single variable</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot2.html"><a href="ggplot2.html#mapping-for-all-visuals-versus-just-one-visual"><i class="fa fa-check"></i><b>5.6</b> Mapping for all visuals versus just one visual</a></li>
<li class="chapter" data-level="5.7" data-path="ggplot2.html"><a href="ggplot2.html#mapping-on-variables-versus-constants"><i class="fa fa-check"></i><b>5.7</b> Mapping on variables versus constants</a></li>
<li class="chapter" data-level="5.8" data-path="ggplot2.html"><a href="ggplot2.html#themes"><i class="fa fa-check"></i><b>5.8</b> Themes</a></li>
<li class="chapter" data-level="5.9" data-path="ggplot2.html"><a href="ggplot2.html#you-aint-seen-nothing-yet"><i class="fa fa-check"></i><b>5.9</b> You ain’t seen nothing yet</a></li>
<li class="chapter" data-level="5.10" data-path="ggplot2.html"><a href="ggplot2.html#further-reading"><i class="fa fa-check"></i><b>5.10</b> Further reading</a></li>
<li class="chapter" data-level="5.11" data-path="ggplot2.html"><a href="ggplot2.html#extending-ggplot2"><i class="fa fa-check"></i><b>5.11</b> Extending ggplot2</a></li>
<li class="chapter" data-level="5.12" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-cannot-do-everything"><i class="fa fa-check"></i><b>5.12</b> ggplot2 cannot do everything</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>6</b> Tidyverse: dplyr</a>
<ul>
<li class="chapter" data-level="6.1" data-path="dplyr.html"><a href="dplyr.html#tidyverse-philosophy"><i class="fa fa-check"></i><b>6.1</b> Tidyverse philosophy</a></li>
<li class="chapter" data-level="6.2" data-path="dplyr.html"><a href="dplyr.html#select"><i class="fa fa-check"></i><b>6.2</b> <code>select()</code> columns by name</a></li>
<li class="chapter" data-level="6.3" data-path="dplyr.html"><a href="dplyr.html#conditions"><i class="fa fa-check"></i><b>6.3</b> Conditions</a></li>
<li class="chapter" data-level="6.4" data-path="dplyr.html"><a href="dplyr.html#logical-indexing"><i class="fa fa-check"></i><b>6.4</b> Logical indexing</a></li>
<li class="chapter" data-level="6.5" data-path="dplyr.html"><a href="dplyr.html#filter-rows-by-values"><i class="fa fa-check"></i><b>6.5</b> <code>filter()</code> rows by values</a></li>
<li class="chapter" data-level="6.6" data-path="dplyr.html"><a href="dplyr.html#arrange-rows-in-a-particular-order"><i class="fa fa-check"></i><b>6.6</b> <code>arrange()</code> rows in a particular order</a></li>
<li class="chapter" data-level="6.7" data-path="dplyr.html"><a href="dplyr.html#mutate"><i class="fa fa-check"></i><b>6.7</b> <code>mutate()</code> columns</a></li>
<li class="chapter" data-level="6.8" data-path="dplyr.html"><a href="dplyr.html#summarize"><i class="fa fa-check"></i><b>6.8</b> <code>summarize()</code> table by <code>groups</code></a></li>
<li class="chapter" data-level="6.9" data-path="dplyr.html"><a href="dplyr.html#putting-it-all-together"><i class="fa fa-check"></i><b>6.9</b> Putting it all together</a></li>
<li class="chapter" data-level="6.10" data-path="dplyr.html"><a href="dplyr.html#should-i-use-tidyverse"><i class="fa fa-check"></i><b>6.10</b> Should I use Tidyverse?</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="working-with-factors.html"><a href="working-with-factors.html"><i class="fa fa-check"></i><b>7</b> Working with Factors</a>
<ul>
<li class="chapter" data-level="7.1" data-path="working-with-factors.html"><a href="working-with-factors.html#how-to-write-code"><i class="fa fa-check"></i><b>7.1</b> How to write code</a></li>
<li class="chapter" data-level="7.2" data-path="working-with-factors.html"><a href="working-with-factors.html#implementing-a-typical-analysis"><i class="fa fa-check"></i><b>7.2</b> Implementing a typical analysis</a></li>
<li class="chapter" data-level="7.3" data-path="working-with-factors.html"><a href="working-with-factors.html#factors"><i class="fa fa-check"></i><b>7.3</b> Factors</a></li>
<li class="chapter" data-level="7.4" data-path="working-with-factors.html"><a href="working-with-factors.html#forcats"><i class="fa fa-check"></i><b>7.4</b> Forcats</a></li>
<li class="chapter" data-level="7.5" data-path="working-with-factors.html"><a href="working-with-factors.html#plotting-group-averages"><i class="fa fa-check"></i><b>7.5</b> Plotting group averages</a></li>
<li class="chapter" data-level="7.6" data-path="working-with-factors.html"><a href="working-with-factors.html#plotting-our-confidence-in-group-averages-via-quantiles"><i class="fa fa-check"></i><b>7.6</b> Plotting our confidence in group averages via quantiles</a></li>
<li class="chapter" data-level="7.7" data-path="working-with-factors.html"><a href="working-with-factors.html#looking-at-similarity"><i class="fa fa-check"></i><b>7.7</b> Looking at similarity</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tyding.html"><a href="tyding.html"><i class="fa fa-check"></i><b>8</b> Tidyng your data: joins and pivots</a>
<ul>
<li class="chapter" data-level="8.1" data-path="tyding.html"><a href="tyding.html#joins"><i class="fa fa-check"></i><b>8.1</b> Joining tables</a></li>
<li class="chapter" data-level="8.2" data-path="tyding.html"><a href="tyding.html#pivoting"><i class="fa fa-check"></i><b>8.2</b> Pivoting</a></li>
<li class="chapter" data-level="8.3" data-path="tyding.html"><a href="tyding.html#pivot-longer"><i class="fa fa-check"></i><b>8.3</b> Pivot longer</a></li>
<li class="chapter" data-level="8.4" data-path="tyding.html"><a href="tyding.html#pivot-wider"><i class="fa fa-check"></i><b>8.4</b> Pivot wider</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html"><i class="fa fa-check"></i><b>9</b> Controling computation flow</a>
<ul>
<li class="chapter" data-level="9.1" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#rep"><i class="fa fa-check"></i><b>9.1</b> <code>rep()</code></a></li>
<li class="chapter" data-level="9.2" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#repeating-combinations"><i class="fa fa-check"></i><b>9.2</b> Repeating combinations</a></li>
<li class="chapter" data-level="9.3" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#forloop"><i class="fa fa-check"></i><b>9.3</b> For loop</a></li>
<li class="chapter" data-level="9.4" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#conditional-statement"><i class="fa fa-check"></i><b>9.4</b> Conditional statement</a></li>
<li class="chapter" data-level="9.5" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#breaking-out-of-the-loop"><i class="fa fa-check"></i><b>9.5</b> Breaking out of the loop</a></li>
<li class="chapter" data-level="9.6" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#using-for-loop-to-load-and-join-multiple-data-files"><i class="fa fa-check"></i><b>9.6</b> Using for loop to load and join multiple data files</a></li>
<li class="chapter" data-level="9.7" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#apply"><i class="fa fa-check"></i><b>9.7</b> Apply</a></li>
<li class="chapter" data-level="9.8" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#purrr"><i class="fa fa-check"></i><b>9.8</b> Purrr</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="christmas-special.html"><a href="christmas-special.html"><i class="fa fa-check"></i><b>10</b> Christmas special</a>
<ul>
<li class="chapter" data-level="10.1" data-path="christmas-special.html"><a href="christmas-special.html#left-side-of-the-tree"><i class="fa fa-check"></i><b>10.1</b> Left side of the tree</a></li>
<li class="chapter" data-level="10.2" data-path="christmas-special.html"><a href="christmas-special.html#right-side-of-the-tree"><i class="fa fa-check"></i><b>10.2</b> Right side of the tree</a></li>
<li class="chapter" data-level="10.3" data-path="christmas-special.html"><a href="christmas-special.html#the-whole-tree"><i class="fa fa-check"></i><b>10.3</b> The whole tree</a></li>
<li class="chapter" data-level="10.4" data-path="christmas-special.html"><a href="christmas-special.html#filling-in-the-tree"><i class="fa fa-check"></i><b>10.4</b> Filling in the tree</a></li>
<li class="chapter" data-level="10.5" data-path="christmas-special.html"><a href="christmas-special.html#adding-background-image"><i class="fa fa-check"></i><b>10.5</b> Adding background image</a></li>
<li class="chapter" data-level="10.6" data-path="christmas-special.html"><a href="christmas-special.html#adding-decoration-a-boring-one"><i class="fa fa-check"></i><b>10.6</b> Adding decoration (a boring one)</a></li>
<li class="chapter" data-level="10.7" data-path="christmas-special.html"><a href="christmas-special.html#adding-decoration-a-bit-more-fun-one"><i class="fa fa-check"></i><b>10.7</b> Adding decoration (a bit more fun one)</a></li>
<li class="chapter" data-level="10.8" data-path="christmas-special.html"><a href="christmas-special.html#adding-decoration-the-fun-ones"><i class="fa fa-check"></i><b>10.8</b> Adding decoration (the fun ones)</a></li>
<li class="chapter" data-level="10.9" data-path="christmas-special.html"><a href="christmas-special.html#a-star-on-top"><i class="fa fa-check"></i><b>10.9</b> A star on top</a></li>
<li class="chapter" data-level="10.10" data-path="christmas-special.html"><a href="christmas-special.html#merry-christmas"><i class="fa fa-check"></i><b>10.10</b> Merry Christmas!</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://alexander-pastukhov.github.io/">Alexander (Sasha) Pastukhov</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data analysis using R for Psychology and Social Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="christmas-special" class="section level1" number="10">
<h1><span class="header-section-number">Seminar 10</span> Christmas special</h1>
<p>Today we will work on our Christmas spirit, while practicing in generating data and plotting. Our end-product will be a Christmas tree plot that you see below. For this project you will need <a href="https://cran.r-project.org/package=png">png</a> library (you should have it already but check and install, if that is not the case) and a <a href="images/christmas-background.png">background image</a> created by <a href="https://openclipart.org/artist/GDJ">Gordon Dylan Johnson</a>. Grab the <a href="notebooks/Seminar%2010%20-%20Christmas%20special.Rmd">exercise notebook</a> as well!</p>
<p><img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-255-1.png" width="672" /></p>
<div id="left-side-of-the-tree" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> Left side of the tree</h2>
<p>First we need a tree. We will generate its shape using a function: <code>x = y - 0.3 * floor(y)</code>, where <code>y</code> should vary between -3 and -0.3<a href="#fn57" class="footnote-ref" id="fnref57"><sup>57</sup></a> (you already know how to generate a <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/seq.html">sequence</a>, so just decide on how many point you want your shape to have). This function describes a <em>left</em> part of the tree, so create a table called <code>tree_left</code> with corresponding <code>x</code> and <code>y</code> columns and plot it via <a href="https://ggplot2.tidyverse.org/">ggplot2</a>. Note that you need to use <a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_path()</a> rather than <code>geom_line()</code>. The former connects points in the order they appear in the table, whereas the latter first sort all variables based on the x-axis variable (try it out to see what I mean). You should get a plot like the one below.</p>
<p><img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-256-1.png" width="672" /></p>
<div class="infobox practice">
<p>Do exercise 1.</p>
</div>
</div>
<div id="right-side-of-the-tree" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> Right side of the tree</h2>
<p>We could use an almost the same formula to generate the right side of the tree. Or, we can create it as a mirror copy of the <code>tree_left</code>. In the latter case, we must flip the sign of the <code>x</code> (so negative <code>x</code> become positive). And, a more subtle point, we need to reverse the order of <em>all</em> rows in the table, so that <code>y</code> goes from -0.3 to -3 (it is going from -3 to -0.3 in <code>tree_left</code>, take a look yourself). You can rearrange table using subsetting or by <a href="https://dplyr.tidyverse.org/reference/arrange.html">arranging</a> the rows based on <a href="https://dplyr.tidyverse.org/reference/desc.html?q=desc">descending order</a> of either <code>y</code> or <a href="https://dplyr.tidyverse.org/reference/ranking.html">row_number()</a> (here, it will effectively give you an index for each row). The right side should look just like the left side (but mirrored!).</p>
<p><img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-257-1.png" width="672" /></p>
<div class="infobox practice">
<p>Do exercise 2.</p>
</div>
</div>
<div id="the-whole-tree" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> The whole tree</h2>
<p>Now let us draw the entire tree. We will do it in two ways, to practice. First, <a href="https://dplyr.tidyverse.org/reference/bind.html">bind</a> tables <code>tree_left</code> and <code>tree_right</code> by rows to create a new table (I called it <code>tree_shape</code>) and then reuse the same code with a single <code>geom_path()</code> call as before. Note that if you have an odd extra line going from bottom right to the top of the tree that means you did not reverse the <code>tree_right</code> table (see above).</p>
<p><img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-258-1.png" width="672" /></p>
<div class="infobox practice">
<p>Do exercise 3.</p>
</div>
<p>Alternatively, you can plot <code>tree_left</code> and <code>tree_right</code> separately by using two <code>geom_path()</code> calls. Here, you use data from <em>different</em> tables in a single plot, so you need to specify <code>data</code> parameter more than once. There are three ways to do it here. First, do not specify any data and aesthetics in the <code>ggplot()</code> call itself and use it explicitly in each <code>geom_path()</code> call. Note that you need to use named parameters via <code>data=...</code>.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="christmas-special.html#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb398-2"><a href="christmas-special.html#cb398-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data=</span>tree_left, <span class="fu">aes</span>(...), ...) <span class="sc">+</span></span>
<span id="cb398-3"><a href="christmas-special.html#cb398-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data=</span>tree_right, <span class="fu">aes</span>(...), ...)</span></code></pre></div>
<p>Or, you can use <code>tree_left</code> (or <code>tree_right</code>) as a “main” data source and specify a different one only in one of the <code>geom_path()</code> calls:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="christmas-special.html#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>tree_left, <span class="fu">aes</span>(...), ...) <span class="sc">+</span> </span>
<span id="cb399-2"><a href="christmas-special.html#cb399-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>() <span class="sc">+</span></span>
<span id="cb399-3"><a href="christmas-special.html#cb399-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data=</span>tree_right)</span></code></pre></div>
<p>Here, I would suggest the first option of not specifying a “main” data source, as we will use even more different tables later on.</p>
<div class="infobox practice">
<p>Do exercise 4.</p>
</div>
</div>
<div id="filling-in-the-tree" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> Filling in the tree</h2>
<p>Now, let us “fill in” the shape between the lines. For this, we will use <a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_ribbon</a> that fills in a shape either between vertical limits (when you specify <code>ymin</code> and <code>ymax</code> aesthetics) or between the horizontal ones (<code>xmin</code> and <code>xmax</code>). The latter is our case but first we need to combine our left and right shape into a single table with three columns: <code>y</code> coordinate and <code>x_left</code> and <code>x_right</code> coordinates. Think how can you join these the two tables <code>tree_left</code> and <code>tree_right</code> to achieve this (pause and ponder before reading further).</p>
<p><img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-259-1.png" width="672" /></p>
<p>Hint: use a <a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">join</a> but pay attention to <code>suffix</code> parameter as it will be useful. Put the new table into the <code>tree</code> variable (we will use it later again). Take a look at the table you get before plotting it using <a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_ribbon</a>.</p>
<div class="infobox practice">
<p>Do exercise 5.</p>
</div>
</div>
<div id="adding-background-image" class="section level2" number="10.5">
<h2><span class="header-section-number">10.5</span> Adding background image</h2>
<p>Our background is not very Christmasy. We should drop the grid altogether (which <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme</a> would be the best?) and replace it with a <a href="images/christmas-background.png">nice picture</a>. To use this picture, you need the <a href="https://cran.r-project.org/package=png">png</a> library (import it in the setup chunk, not here!) and then use <code>readPNG()</code> function (see <a href="https://cran.r-project.org/web/packages/png/png.pdf">official docs</a> or just type <code>?readPNG</code> in console). Once you read an image into a variable (I imaginatively called it <code>background</code>), you can add it to the plot in two ways. A simpler way is by using function <a href="https://rpkgs.datanovia.com/ggpubr/reference/background_image.html">background_image()</a> from <a href="https://rpkgs.datanovia.com/ggpubr/">ggpubr</a> library. You add it to the plot just as you do with other geoms. However, this function is only a very thin wrapper for <a href="https://ggplot2.tidyverse.org/reference/annotation_raster.html">annotation_raster()</a> call, so you could copy-paste it from the function body and use it directly:</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="christmas-special.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="co"># code from ggpubr github repository</span></span>
<span id="cb400-2"><a href="christmas-special.html#cb400-2" aria-hidden="true" tabindex="-1"></a>background_image <span class="ot">&lt;-</span> <span class="cf">function</span>(raster.img){</span>
<span id="cb400-3"><a href="christmas-special.html#cb400-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotation_raster</span>(raster.img,</span>
<span id="cb400-4"><a href="christmas-special.html#cb400-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>,</span>
<span id="cb400-5"><a href="christmas-special.html#cb400-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>)</span>
<span id="cb400-6"><a href="christmas-special.html#cb400-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>You new plot should look like this:
<img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-261-1.png" width="672" /></p>
<div class="infobox practice">
<p>Do exercise 6.</p>
</div>
</div>
<div id="adding-decoration-a-boring-one" class="section level2" number="10.6">
<h2><span class="header-section-number">10.6</span> Adding decoration (a boring one)</h2>
<p>We need some decoration on our tree. Our task is to generate “Christmas balls” (<a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a>) at various locations <em>within</em> the tree. For this, we need to first randomly select rows from our <code>tree</code> table that you created in exercise 5 and then generate a random location <em>within</em> the tree limits for each sampled row. Let us deal with the first problem (randomly selecting riws, so, effectively, randomly selecting y coordinate) first.</p>
<p>To randomly sample rows from a table, you can use <a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample</a> function from <a href="https://dplyr.tidyverse.org/index.html">dplyr</a>. It takes a table and returns a new table with randomly sampled rows. You only need to specify a number of rows that you want to have in a new table either directly (parameter <code>n</code>) or as a proportion of number of rows in the original table (parameter <code>prop</code>). In our case, I used the latter and sampled half of the original tree table. You also need to decide on whether the same row can be sampled more than once (so-called sampling with replacement). I opted for this via <code>replace=TRUE</code> parameter. Finally, we want rows that describe the lower part of the tree to be sampled more often than the upper ones because we can put more decoration on them (the tree is wider). For this, we need to compute width of the tree for each row (a new column that I called <code>x_range</code> but you can call it <code>width</code>) <em>before</em> the sampling. Then, we can use that <code>x_range</code> for the <code>weight_by</code> parameter of the <a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample</a>. Put a sampled table into a new variable (I called it <code>balls</code>) and add it to the plot via <a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a>. For the moment, use <code>x_left</code> for x-coordinate. It will put all the balls on the left edge of the tree but we will fix this shortly.</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="christmas-special.html#cb401-1" aria-hidden="true" tabindex="-1"></a>balls <span class="ot">&lt;-</span> </span>
<span id="cb401-2"><a href="christmas-special.html#cb401-2" aria-hidden="true" tabindex="-1"></a>  tree <span class="sc">%&gt;%</span></span>
<span id="cb401-3"><a href="christmas-special.html#cb401-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">x_range =</span> x_right <span class="sc">-</span> x_left) <span class="sc">%&gt;%</span></span>
<span id="cb401-4"><a href="christmas-special.html#cb401-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.5</span>, <span class="at">weight_by =</span> x_range, <span class="at">replace=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb401-5"><a href="christmas-special.html#cb401-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">x =</span> <span class="fu">runif</span>(<span class="fu">n</span>(), x_left, x_right),</span>
<span id="cb401-6"><a href="christmas-special.html#cb401-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">size =</span> <span class="fu">rnorm</span>(<span class="fu">n</span>(), <span class="dv">5</span>, <span class="dv">1</span>),</span>
<span id="cb401-7"><a href="christmas-special.html#cb401-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">icolor =</span> <span class="fu">factor</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">n</span>(), <span class="at">replace=</span><span class="cn">TRUE</span>)))</span>
<span id="cb401-8"><a href="christmas-special.html#cb401-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb401-9"><a href="christmas-special.html#cb401-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tree_left, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)) <span class="sc">+</span> </span>
<span id="cb401-10"><a href="christmas-special.html#cb401-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotation_raster</span>(background,</span>
<span id="cb401-11"><a href="christmas-special.html#cb401-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>,</span>
<span id="cb401-12"><a href="christmas-special.html#cb401-12" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb401-13"><a href="christmas-special.html#cb401-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">color=</span><span class="st">&quot;darkgreen&quot;</span>) <span class="sc">+</span></span>
<span id="cb401-14"><a href="christmas-special.html#cb401-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">data=</span>tree, <span class="fu">aes</span>(<span class="at">x=</span>x_left, <span class="at">xmin=</span>x_left, <span class="at">xmax=</span>x_right), <span class="at">fill=</span><span class="st">&quot;darkgreen&quot;</span>) <span class="sc">+</span></span>
<span id="cb401-15"><a href="christmas-special.html#cb401-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data=</span>tree_right, <span class="at">color=</span><span class="st">&quot;darkgreen&quot;</span>) <span class="sc">+</span></span>
<span id="cb401-16"><a href="christmas-special.html#cb401-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>balls, <span class="fu">aes</span>(<span class="at">x=</span>x_left, <span class="at">y=</span>y)) <span class="sc">+</span></span>
<span id="cb401-17"><a href="christmas-special.html#cb401-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code></pre></div>
<p><img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-262-1.png" width="672" /></p>
<div class="infobox practice">
<p>Do exercise 7.</p>
</div>
</div>
<div id="adding-decoration-a-bit-more-fun-one" class="section level2" number="10.7">
<h2><span class="header-section-number">10.7</span> Adding decoration (a bit more fun one)</h2>
<p>We created the vertical location for each ball via random sampling. Now we need to generate a valid x-position somewhere in between <code>x_left</code> and <code>x_right</code> coordinates. Use <a href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/Uniform.html">runif()</a> function for using <code>x_left</code> and <code>x_right</code>. Note that you need to specify the number of random values to generate. That should be the number of rows in the table. If you do it within mutate, use function <a href="https://dplyr.tidyverse.org/reference/context.html">n()</a>. For base R, you can use <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/nrow.html">nrow()</a>. Create a new column <code>x</code> and use it for plotting. Note how plot changes every time you re-run the sampling or randomization code.</p>
<p><img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-263-1.png" width="672" /></p>
<div class="infobox practice">
<p>Do exercise 8.</p>
</div>
</div>
<div id="adding-decoration-the-fun-ones" class="section level2" number="10.8">
<h2><span class="header-section-number">10.8</span> Adding decoration (the fun ones)</h2>
<p>Black tiny Christmas balls of the same size? That won’t do! Generate a new column (I called it <code>size</code>) with random ball sizes drawn from a <a href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/Normal.html">normal distribution</a>. Decide on a reasonable mean and standard deviation but remember that you need to specify the number of random values that you want (just like for <a href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/Uniform.html">runif()</a> above).</p>
<p>Second, let as specify color of individual balls as a factor variable. This way, we can use it for <code>color</code> aesthetics and ggplot2 will use it palettes to pick the colors for us. Just create a vector of some numbers (the number of unique entries will be your number of colors) and convert it to a factor (check what will happen, if you won’t do this). Inside the <a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a> call, use <code>show.legend=FALSE</code> to suppress the legend (check what will happen, if you set it to <code>TRUE</code> or omit it).</p>
<p><img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-264-1.png" width="672" /></p>
<div class="infobox practice">
<p>Do exercise 9.</p>
</div>
</div>
<div id="a-star-on-top" class="section level2" number="10.9">
<h2><span class="header-section-number">10.9</span> A star on top</h2>
<p>Our final touch will be a star on the top of the tree. We could use another <a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a> but with a different <a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html#sec:shape-spec">shape</a> but instead we will draw it as a regular polygon with odd number of vertices, like the ones you see below. The numbers indicate the order in which vertices are created and drawn along the path. To make a closed contour, we very first (top) vertex needs to be also the last vertex, so you cannot see a label for #1 (it is covered by #6, #8, and #10 labels) but it is definitely where. Think how you can generate such a shape by walking around the circle with a given angular step and how you can compute x and y coordinates by knowing that angle and a radius (size) of the shape (here, I assumed radius to be 1).</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="christmas-special.html#cb402-1" aria-hidden="true" tabindex="-1"></a>star_plots <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span>(<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>),</span>
<span id="cb402-2"><a href="christmas-special.html#cb402-2" aria-hidden="true" tabindex="-1"></a>                         <span class="sc">~</span><span class="fu">tibble</span>(<span class="at">theta =</span> (<span class="dv">0</span><span class="sc">:</span>.) <span class="sc">*</span> (<span class="dv">4</span> <span class="sc">*</span> pi <span class="sc">/</span> .)) <span class="sc">%&gt;%</span></span>
<span id="cb402-3"><a href="christmas-special.html#cb402-3" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">mutate</span>(<span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>(),</span>
<span id="cb402-4"><a href="christmas-special.html#cb402-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">x =</span> <span class="fu">sin</span>(theta),</span>
<span id="cb402-5"><a href="christmas-special.html#cb402-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">y =</span> <span class="fu">cos</span>(theta)) <span class="sc">%&gt;%</span></span>
<span id="cb402-6"><a href="christmas-special.html#cb402-6" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)) <span class="sc">+</span> </span>
<span id="cb402-7"><a href="christmas-special.html#cb402-7" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">geom_path</span>() <span class="sc">+</span></span>
<span id="cb402-8"><a href="christmas-special.html#cb402-8" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">label=</span>i)) <span class="sc">+</span></span>
<span id="cb402-9"><a href="christmas-special.html#cb402-9" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">coord_equal</span>())</span>
<span id="cb402-10"><a href="christmas-special.html#cb402-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb402-11"><a href="christmas-special.html#cb402-11" aria-hidden="true" tabindex="-1"></a>                      </span>
<span id="cb402-12"><a href="christmas-special.html#cb402-12" aria-hidden="true" tabindex="-1"></a>star_plots[[<span class="dv">1</span>]] <span class="sc">|</span> star_plots[[<span class="dv">2</span>]] <span class="sc">|</span> star_plots[[<span class="dv">3</span>]]</span></code></pre></div>
<p><img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-265-1.png" width="672" /></p>
<p>If you examine the plots above, you will see that you go around the circle in exactly N steps, where N is 5, 7, or 9. Thus you can compute an angular step between <em>adjacent</em> vertices by diving the length of a circle in degrees or radians by the number of steps you need to make. However, for our star we are not connecting each vertex to a adjacent one but to the <em>next</em> one. Think about what it means to the step size. Once you’ve figured out the step size, you can generate location of each vertex in term of a <em>polar angle</em> starting at 0 (top position) using that step. Note that you need to have N+1 vertices to close the contour and that serves as a nice sanity check as the polar angle for the first and the last entry mast be the same (keeping in mind that 0 is the same angle as 360° and <span class="math inline">\(2\cdot\pi\)</span>). Later on, we want radians as we will use the angle with trigonometric functions but I suggest that you first generate a vector of angles in degrees, as it makes checking values easier.</p>
<p>To turn a polar angle into x/y coordinates, you need to recall <a href="https://en.wikipedia.org/wiki/List_of_trigonometric_identities">basic trigonometry</a> that is drawn below.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-266"></span>
<img src="images/cos_sin_on_unit_circle.png" alt="Cosine and sine on the unit circle by Stephan Kulla (User:Stephan Kulla) - Own work, CC0, https://commons.wikimedia.org/w/index.php?curid=57551646." width="50%" />
<p class="caption">
Figure 10.1: Cosine and sine on the unit circle by Stephan Kulla (User:Stephan Kulla) - Own work, CC0, <a href="https://commons.wikimedia.org/w/index.php?curid=57551646" class="uri">https://commons.wikimedia.org/w/index.php?curid=57551646</a>.
</p>
</div>
<p>Pick the number of vertices that you like, generate polar angles, convert them to x and y coordinates, and plot the contour to check it visually. Try using <a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html">geom_polygon</a> with a fill color instead of <a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_path</a>.</p>
<div class="infobox practice">
<p>Do exercise 10.</p>
</div>
<p>Our star is ready, we only need to add the <a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html">geom_polygon</a>. However, your “default” star will look way to big and will not be on the top of the tree, as in the figure below.
<img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-267-1.png" width="672" />
Think how you can adjust the size (radius of the star) to make it smaller and what adjustment to y-coordinate do you need to make.
<img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-268-1.png" width="672" /></p>
<div class="infobox practice">
<p>Do exercise 11.</p>
</div>
</div>
<div id="merry-christmas" class="section level2" number="10.10">
<h2><span class="header-section-number">10.10</span> Merry Christmas!</h2>
<p>Although this assignment might look whimsical, it relies on techniques for parametrically generating data that are useful for real-life power analysis, prior predictive modelling, simulating data for model testing, etc.</p>

</div>
</div>






























































<div class="footnotes">
<hr />
<ol start="57">
<li id="fn57"><p>You should definitely try different values for both y range and for the linear part itself to get a feeling of what it does to the shape you generate.<a href="christmas-special.html#fnref57" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="controling-computation-flow.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["data-analysis-using-r-for-psychology.pdf", "data-analysis-using-r-for-psychology.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
