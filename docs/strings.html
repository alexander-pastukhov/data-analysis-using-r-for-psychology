<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Seminar 12 Working with strings | Data analysis using R for Psychology and Social Science</title>
  <meta name="description" content="Material and exercises for ‘Applied data analysis for psychology using the open-source software R’ seminar." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Seminar 12 Working with strings | Data analysis using R for Psychology and Social Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Material and exercises for ‘Applied data analysis for psychology using the open-source software R’ seminar." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Seminar 12 Working with strings | Data analysis using R for Psychology and Social Science" />
  
  <meta name="twitter:description" content="Material and exercises for ‘Applied data analysis for psychology using the open-source software R’ seminar." />
  

<meta name="author" content="Alexander (Sasha) Pastukhov" />


<meta name="date" content="2022-01-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="missing-data.html"/>
<link rel="next" href="sampling-and-simulations.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="font-awesome.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data analysis using R for Psychology</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-r"><i class="fa fa-check"></i>Why R?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-tidyverse"><i class="fa fa-check"></i>Why Tidyverse</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-seminar"><i class="fa fa-check"></i>About the seminar</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#thinking-like-a-computer"><i class="fa fa-check"></i>Thinking like a computer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-material"><i class="fa fa-check"></i>About the material</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="software.html"><a href="software.html"><i class="fa fa-check"></i>Software</a>
<ul>
<li class="chapter" data-level="0.1" data-path="software.html"><a href="software.html#install-r"><i class="fa fa-check"></i><b>0.1</b> Installing R</a></li>
<li class="chapter" data-level="0.2" data-path="software.html"><a href="software.html#install-rstudio"><i class="fa fa-check"></i><b>0.2</b> Installing R-Studio</a></li>
<li class="chapter" data-level="0.3" data-path="software.html"><a href="software.html#install-rtools"><i class="fa fa-check"></i><b>0.3</b> Installing RTools</a></li>
<li class="chapter" data-level="" data-path="software.html"><a href="software.html#install.packages"><i class="fa fa-check"></i>Installing packages</a></li>
<li class="chapter" data-level="0.4" data-path="software.html"><a href="software.html#minimal-set-of-packages"><i class="fa fa-check"></i><b>0.4</b> Minimal set of packages</a></li>
<li class="chapter" data-level="0.5" data-path="software.html"><a href="software.html#installr"><i class="fa fa-check"></i><b>0.5</b> Keeping R and packages up-to-date</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="reproducable-research.html"><a href="reproducable-research.html"><i class="fa fa-check"></i><b>1</b> Reproducable Research: Projects and RMarkdown Notebooks</a>
<ul>
<li class="chapter" data-level="1.1" data-path="reproducable-research.html"><a href="reproducable-research.html#projects"><i class="fa fa-check"></i><b>1.1</b> Projects</a></li>
<li class="chapter" data-level="1.2" data-path="reproducable-research.html"><a href="reproducable-research.html#rmarkdown"><i class="fa fa-check"></i><b>1.2</b> RMarkdown</a></li>
<li class="chapter" data-level="1.3" data-path="reproducable-research.html"><a href="reproducable-research.html#exercise"><i class="fa fa-check"></i><b>1.3</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>2</b> Vectors! Vectors everywhere!</a>
<ul>
<li class="chapter" data-level="2.1" data-path="vectors.html"><a href="vectors.html#variables"><i class="fa fa-check"></i><b>2.1</b> Variables as boxes</a></li>
<li class="chapter" data-level="2.2" data-path="vectors.html"><a href="vectors.html#assignment-statement"><i class="fa fa-check"></i><b>2.2</b> Assignment statement in detail</a></li>
<li class="chapter" data-level="2.3" data-path="vectors.html"><a href="vectors.html#vectors-scalars"><i class="fa fa-check"></i><b>2.3</b> Vectors and singluar values (scalars, which are also vectors)</a></li>
<li class="chapter" data-level="2.4" data-path="vectors.html"><a href="vectors.html#vector-index"><i class="fa fa-check"></i><b>2.4</b> Vector indexes (subsetting)</a></li>
<li class="chapter" data-level="2.5" data-path="vectors.html"><a href="vectors.html#names"><i class="fa fa-check"></i><b>2.5</b> Names as an Index</a></li>
<li class="chapter" data-level="2.6" data-path="vectors.html"><a href="vectors.html#vector-index-slicing"><i class="fa fa-check"></i><b>2.6</b> Slicing</a></li>
<li class="chapter" data-level="2.7" data-path="vectors.html"><a href="vectors.html#colon-sequence"><i class="fa fa-check"></i><b>2.7</b> Colon Operator and Sequence Generation</a></li>
<li class="chapter" data-level="2.8" data-path="vectors.html"><a href="vectors.html#working-with-two-vectors-of-equal-length"><i class="fa fa-check"></i><b>2.8</b> Working with two vectors of <em>equal</em> length</a></li>
<li class="chapter" data-level="2.9" data-path="vectors.html"><a href="vectors.html#different-length-vectors"><i class="fa fa-check"></i><b>2.9</b> Working with two vectors of <em>different</em> length</a></li>
<li class="chapter" data-level="2.10" data-path="vectors.html"><a href="vectors.html#applying-functions-to-a-vector"><i class="fa fa-check"></i><b>2.10</b> Applying functions to a vector</a></li>
<li class="chapter" data-level="2.11" data-path="vectors.html"><a href="vectors.html#wrap-up"><i class="fa fa-check"></i><b>2.11</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>3</b> Tables and Tibbles (and Tribbles)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tables.html"><a href="tables.html#primary-types"><i class="fa fa-check"></i><b>3.1</b> Primary data types</a></li>
<li class="chapter" data-level="3.2" data-path="tables.html"><a href="tables.html#vectors-are-homogeneous"><i class="fa fa-check"></i><b>3.2</b> All vector values must be of the same type</a></li>
<li class="chapter" data-level="3.3" data-path="tables.html"><a href="tables.html#lists"><i class="fa fa-check"></i><b>3.3</b> Lists</a></li>
<li class="chapter" data-level="3.4" data-path="tables.html"><a href="tables.html#subsetting"><i class="fa fa-check"></i><b>3.4</b> Subsetting, a fuller version</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="tables.html"><a href="tables.html#subsetting-for-atomics-vectors"><i class="fa fa-check"></i><b>3.4.1</b> Subsetting for (atomics) vectors</a></li>
<li class="chapter" data-level="3.4.2" data-path="tables.html"><a href="tables.html#subsetting-for-lists"><i class="fa fa-check"></i><b>3.4.2</b> Subsetting for lists</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="tables.html"><a href="tables.html#dollar-subsetting"><i class="fa fa-check"></i><b>3.5</b> Yet another subsetting via $</a></li>
<li class="chapter" data-level="3.6" data-path="tables.html"><a href="tables.html#data.frame"><i class="fa fa-check"></i><b>3.6</b> Tables, a.k.a. data frames</a></li>
<li class="chapter" data-level="3.7" data-path="tables.html"><a href="tables.html#table-subsetting"><i class="fa fa-check"></i><b>3.7</b> Subsetting tables</a></li>
<li class="chapter" data-level="3.8" data-path="tables.html"><a href="tables.html#library"><i class="fa fa-check"></i><b>3.8</b> Using libraries</a></li>
<li class="chapter" data-level="3.9" data-path="tables.html"><a href="tables.html#tibble"><i class="fa fa-check"></i><b>3.9</b> Tibble, a better data.frame</a></li>
<li class="chapter" data-level="3.10" data-path="tables.html"><a href="tables.html#tribble"><i class="fa fa-check"></i><b>3.10</b> Tribble, table from text</a></li>
<li class="chapter" data-level="3.11" data-path="tables.html"><a href="tables.html#data"><i class="fa fa-check"></i><b>3.11</b> Reading example tables</a></li>
<li class="chapter" data-level="3.12" data-path="tables.html"><a href="tables.html#readr"><i class="fa fa-check"></i><b>3.12</b> Reading csv files</a></li>
<li class="chapter" data-level="3.13" data-path="tables.html"><a href="tables.html#readxl"><i class="fa fa-check"></i><b>3.13</b> Reading Excel files</a></li>
<li class="chapter" data-level="3.14" data-path="tables.html"><a href="tables.html#reading-files-from-other-programs"><i class="fa fa-check"></i><b>3.14</b> Reading files from other programs</a></li>
<li class="chapter" data-level="3.15" data-path="tables.html"><a href="tables.html#rds"><i class="fa fa-check"></i><b>3.15</b> Writing and reading a single object</a></li>
<li class="chapter" data-level="3.16" data-path="tables.html"><a href="tables.html#wrap-up-1"><i class="fa fa-check"></i><b>3.16</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>4</b> Functions! Functions everywhere!</a>
<ul>
<li class="chapter" data-level="4.1" data-path="functions.html"><a href="functions.html#functions-1"><i class="fa fa-check"></i><b>4.1</b> Functions</a></li>
<li class="chapter" data-level="4.2" data-path="functions.html"><a href="functions.html#writing-a-function"><i class="fa fa-check"></i><b>4.2</b> Writing a function</a></li>
<li class="chapter" data-level="4.3" data-path="functions.html"><a href="functions.html#scopes-global-versus-local-variables"><i class="fa fa-check"></i><b>4.3</b> Scopes: Global versus Local variables</a></li>
<li class="chapter" data-level="4.4" data-path="functions.html"><a href="functions.html#function-with-two-parameters"><i class="fa fa-check"></i><b>4.4</b> Function with two parameters</a></li>
<li class="chapter" data-level="4.5" data-path="functions.html"><a href="functions.html#table-as-a-parameter"><i class="fa fa-check"></i><b>4.5</b> Table as a parameter</a></li>
<li class="chapter" data-level="4.6" data-path="functions.html"><a href="functions.html#named-versus-positional-arguments"><i class="fa fa-check"></i><b>4.6</b> Named versus positional arguments</a></li>
<li class="chapter" data-level="4.7" data-path="functions.html"><a href="functions.html#default-values"><i class="fa fa-check"></i><b>4.7</b> Default values</a></li>
<li class="chapter" data-level="4.8" data-path="functions.html"><a href="functions.html#nested-calls"><i class="fa fa-check"></i><b>4.8</b> Nested calls</a></li>
<li class="chapter" data-level="4.9" data-path="functions.html"><a href="functions.html#pipe"><i class="fa fa-check"></i><b>4.9</b> Piping</a></li>
<li class="chapter" data-level="4.10" data-path="functions.html"><a href="functions.html#function-is-just-a-code-stored-in-a-variable"><i class="fa fa-check"></i><b>4.10</b> Function is just a code stored in a variable</a></li>
<li class="chapter" data-level="4.11" data-path="functions.html"><a href="functions.html#functions-functions-everywhere"><i class="fa fa-check"></i><b>4.11</b> Functions! Functions everywhere!</a></li>
<li class="chapter" data-level="4.12" data-path="functions.html"><a href="functions.html#using-or-not-using-explicit-return-statement"><i class="fa fa-check"></i><b>4.12</b> Using (or not using) explicit return statement</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>5</b> ggplot2: Grammar of Graphics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ggplot2.html"><a href="ggplot2.html#tidydata"><i class="fa fa-check"></i><b>5.1</b> Tidy data</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-1"><i class="fa fa-check"></i><b>5.2</b> ggplot2</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot2.html"><a href="ggplot2.html#auto-efficiency-continuous-x-axis"><i class="fa fa-check"></i><b>5.3</b> Auto efficiency: continuous x-axis</a></li>
<li class="chapter" data-level="5.4" data-path="ggplot2.html"><a href="ggplot2.html#auto-efficiency-discrete-x-axis"><i class="fa fa-check"></i><b>5.4</b> Auto efficiency: discrete x-axis</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot2.html"><a href="ggplot2.html#mammals-sleep-single-variable"><i class="fa fa-check"></i><b>5.5</b> Mammals sleep: single variable</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot2.html"><a href="ggplot2.html#mapping-for-all-visuals-versus-just-one-visual"><i class="fa fa-check"></i><b>5.6</b> Mapping for all visuals versus just one visual</a></li>
<li class="chapter" data-level="5.7" data-path="ggplot2.html"><a href="ggplot2.html#mapping-on-variables-versus-constants"><i class="fa fa-check"></i><b>5.7</b> Mapping on variables versus constants</a></li>
<li class="chapter" data-level="5.8" data-path="ggplot2.html"><a href="ggplot2.html#themes"><i class="fa fa-check"></i><b>5.8</b> Themes</a></li>
<li class="chapter" data-level="5.9" data-path="ggplot2.html"><a href="ggplot2.html#you-aint-seen-nothing-yet"><i class="fa fa-check"></i><b>5.9</b> You ain’t seen nothing yet</a></li>
<li class="chapter" data-level="5.10" data-path="ggplot2.html"><a href="ggplot2.html#further-reading"><i class="fa fa-check"></i><b>5.10</b> Further reading</a></li>
<li class="chapter" data-level="5.11" data-path="ggplot2.html"><a href="ggplot2.html#extending-ggplot2"><i class="fa fa-check"></i><b>5.11</b> Extending ggplot2</a></li>
<li class="chapter" data-level="5.12" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-cannot-do-everything"><i class="fa fa-check"></i><b>5.12</b> ggplot2 cannot do everything</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>6</b> Tidyverse: dplyr</a>
<ul>
<li class="chapter" data-level="6.1" data-path="dplyr.html"><a href="dplyr.html#tidyverse-philosophy"><i class="fa fa-check"></i><b>6.1</b> Tidyverse philosophy</a></li>
<li class="chapter" data-level="6.2" data-path="dplyr.html"><a href="dplyr.html#select"><i class="fa fa-check"></i><b>6.2</b> <code>select()</code> columns by name</a></li>
<li class="chapter" data-level="6.3" data-path="dplyr.html"><a href="dplyr.html#conditions"><i class="fa fa-check"></i><b>6.3</b> Conditions</a></li>
<li class="chapter" data-level="6.4" data-path="dplyr.html"><a href="dplyr.html#logical-indexing"><i class="fa fa-check"></i><b>6.4</b> Logical indexing</a></li>
<li class="chapter" data-level="6.5" data-path="dplyr.html"><a href="dplyr.html#filter-rows-by-values"><i class="fa fa-check"></i><b>6.5</b> <code>filter()</code> rows by values</a></li>
<li class="chapter" data-level="6.6" data-path="dplyr.html"><a href="dplyr.html#arrange-rows-in-a-particular-order"><i class="fa fa-check"></i><b>6.6</b> <code>arrange()</code> rows in a particular order</a></li>
<li class="chapter" data-level="6.7" data-path="dplyr.html"><a href="dplyr.html#mutate"><i class="fa fa-check"></i><b>6.7</b> <code>mutate()</code> columns</a></li>
<li class="chapter" data-level="6.8" data-path="dplyr.html"><a href="dplyr.html#summarize"><i class="fa fa-check"></i><b>6.8</b> <code>summarize()</code> table by <code>groups</code></a></li>
<li class="chapter" data-level="6.9" data-path="dplyr.html"><a href="dplyr.html#putting-it-all-together"><i class="fa fa-check"></i><b>6.9</b> Putting it all together</a></li>
<li class="chapter" data-level="6.10" data-path="dplyr.html"><a href="dplyr.html#should-i-use-tidyverse"><i class="fa fa-check"></i><b>6.10</b> Should I use Tidyverse?</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="working-with-factors.html"><a href="working-with-factors.html"><i class="fa fa-check"></i><b>7</b> Working with Factors</a>
<ul>
<li class="chapter" data-level="7.1" data-path="working-with-factors.html"><a href="working-with-factors.html#how-to-write-code"><i class="fa fa-check"></i><b>7.1</b> How to write code</a></li>
<li class="chapter" data-level="7.2" data-path="working-with-factors.html"><a href="working-with-factors.html#implementing-a-typical-analysis"><i class="fa fa-check"></i><b>7.2</b> Implementing a typical analysis</a></li>
<li class="chapter" data-level="7.3" data-path="working-with-factors.html"><a href="working-with-factors.html#factors"><i class="fa fa-check"></i><b>7.3</b> Factors</a></li>
<li class="chapter" data-level="7.4" data-path="working-with-factors.html"><a href="working-with-factors.html#forcats"><i class="fa fa-check"></i><b>7.4</b> Forcats</a></li>
<li class="chapter" data-level="7.5" data-path="working-with-factors.html"><a href="working-with-factors.html#plotting-group-averages"><i class="fa fa-check"></i><b>7.5</b> Plotting group averages</a></li>
<li class="chapter" data-level="7.6" data-path="working-with-factors.html"><a href="working-with-factors.html#plotting-our-confidence-in-group-averages-via-quantiles"><i class="fa fa-check"></i><b>7.6</b> Plotting our confidence in group averages via quantiles</a></li>
<li class="chapter" data-level="7.7" data-path="working-with-factors.html"><a href="working-with-factors.html#looking-at-similarity"><i class="fa fa-check"></i><b>7.7</b> Looking at similarity</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tyding.html"><a href="tyding.html"><i class="fa fa-check"></i><b>8</b> Tidyng your data: joins and pivots</a>
<ul>
<li class="chapter" data-level="8.1" data-path="tyding.html"><a href="tyding.html#joins"><i class="fa fa-check"></i><b>8.1</b> Joining tables</a></li>
<li class="chapter" data-level="8.2" data-path="tyding.html"><a href="tyding.html#pivoting"><i class="fa fa-check"></i><b>8.2</b> Pivoting</a></li>
<li class="chapter" data-level="8.3" data-path="tyding.html"><a href="tyding.html#pivot-longer"><i class="fa fa-check"></i><b>8.3</b> Pivot longer</a></li>
<li class="chapter" data-level="8.4" data-path="tyding.html"><a href="tyding.html#pivot-wider"><i class="fa fa-check"></i><b>8.4</b> Pivot wider</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html"><i class="fa fa-check"></i><b>9</b> Controling computation flow</a>
<ul>
<li class="chapter" data-level="9.1" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#rep"><i class="fa fa-check"></i><b>9.1</b> <code>rep()</code></a></li>
<li class="chapter" data-level="9.2" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#repeating-combinations"><i class="fa fa-check"></i><b>9.2</b> Repeating combinations</a></li>
<li class="chapter" data-level="9.3" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#forloop"><i class="fa fa-check"></i><b>9.3</b> For loop</a></li>
<li class="chapter" data-level="9.4" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#if-else"><i class="fa fa-check"></i><b>9.4</b> Conditional statement</a></li>
<li class="chapter" data-level="9.5" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#breaking-out-of-the-loop"><i class="fa fa-check"></i><b>9.5</b> Breaking out of the loop</a></li>
<li class="chapter" data-level="9.6" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#using-for-loop-to-load-and-join-multiple-data-files"><i class="fa fa-check"></i><b>9.6</b> Using for loop to load and join multiple data files</a></li>
<li class="chapter" data-level="9.7" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#apply"><i class="fa fa-check"></i><b>9.7</b> Apply</a></li>
<li class="chapter" data-level="9.8" data-path="controling-computation-flow.html"><a href="controling-computation-flow.html#purrr"><i class="fa fa-check"></i><b>9.8</b> Purrr</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="christmas-special.html"><a href="christmas-special.html"><i class="fa fa-check"></i><b>10</b> Christmas special</a>
<ul>
<li class="chapter" data-level="10.1" data-path="christmas-special.html"><a href="christmas-special.html#left-side-of-the-tree"><i class="fa fa-check"></i><b>10.1</b> Left side of the tree</a></li>
<li class="chapter" data-level="10.2" data-path="christmas-special.html"><a href="christmas-special.html#right-side-of-the-tree"><i class="fa fa-check"></i><b>10.2</b> Right side of the tree</a></li>
<li class="chapter" data-level="10.3" data-path="christmas-special.html"><a href="christmas-special.html#the-whole-tree"><i class="fa fa-check"></i><b>10.3</b> The whole tree</a></li>
<li class="chapter" data-level="10.4" data-path="christmas-special.html"><a href="christmas-special.html#filling-in-the-tree"><i class="fa fa-check"></i><b>10.4</b> Filling in the tree</a></li>
<li class="chapter" data-level="10.5" data-path="christmas-special.html"><a href="christmas-special.html#adding-background-image"><i class="fa fa-check"></i><b>10.5</b> Adding background image</a></li>
<li class="chapter" data-level="10.6" data-path="christmas-special.html"><a href="christmas-special.html#adding-decoration-a-boring-one"><i class="fa fa-check"></i><b>10.6</b> Adding decoration (a boring one)</a></li>
<li class="chapter" data-level="10.7" data-path="christmas-special.html"><a href="christmas-special.html#adding-decoration-a-bit-more-fun-one"><i class="fa fa-check"></i><b>10.7</b> Adding decoration (a bit more fun one)</a></li>
<li class="chapter" data-level="10.8" data-path="christmas-special.html"><a href="christmas-special.html#adding-decoration-the-fun-ones"><i class="fa fa-check"></i><b>10.8</b> Adding decoration (the fun ones)</a></li>
<li class="chapter" data-level="10.9" data-path="christmas-special.html"><a href="christmas-special.html#a-star-on-top"><i class="fa fa-check"></i><b>10.9</b> A star on top</a></li>
<li class="chapter" data-level="10.10" data-path="christmas-special.html"><a href="christmas-special.html#merry-christmas"><i class="fa fa-check"></i><b>10.10</b> Merry Christmas!</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="missing-data.html"><a href="missing-data.html"><i class="fa fa-check"></i><b>11</b> Missing data</a>
<ul>
<li class="chapter" data-level="11.1" data-path="missing-data.html"><a href="missing-data.html#complete"><i class="fa fa-check"></i><b>11.1</b> Making missing data explicit (completing data)</a></li>
<li class="chapter" data-level="11.2" data-path="missing-data.html"><a href="missing-data.html#na.omit"><i class="fa fa-check"></i><b>11.2</b> Dropping / omitting NAs</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>12</b> Working with strings</a>
<ul>
<li class="chapter" data-level="12.1" data-path="strings.html"><a href="strings.html#warming-up"><i class="fa fa-check"></i><b>12.1</b> Warming up</a></li>
<li class="chapter" data-level="12.2" data-path="strings.html"><a href="strings.html#glue"><i class="fa fa-check"></i><b>12.2</b> Formatting strings via <code>glue()</code></a></li>
<li class="chapter" data-level="12.3" data-path="strings.html"><a href="strings.html#paste"><i class="fa fa-check"></i><b>12.3</b> Formatting strings via <code>paste()</code></a></li>
<li class="chapter" data-level="12.4" data-path="strings.html"><a href="strings.html#sprintf"><i class="fa fa-check"></i><b>12.4</b> Formatting strings via <code>sprintf()</code></a></li>
<li class="chapter" data-level="12.5" data-path="strings.html"><a href="strings.html#extracting-information-from-a-string"><i class="fa fa-check"></i><b>12.5</b> Extracting information from a string</a></li>
<li class="chapter" data-level="12.6" data-path="strings.html"><a href="strings.html#splitting-strings-via-separate"><i class="fa fa-check"></i><b>12.6</b> Splitting strings via <code>separate()</code></a></li>
<li class="chapter" data-level="12.7" data-path="strings.html"><a href="strings.html#extracting-a-substring-when-you-know-its-location"><i class="fa fa-check"></i><b>12.7</b> Extracting a substring when you know its location</a></li>
<li class="chapter" data-level="12.8" data-path="strings.html"><a href="strings.html#detecting-a-substring-using-regular-expressions"><i class="fa fa-check"></i><b>12.8</b> Detecting a substring using regular expressions</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="sampling-and-simulations.html"><a href="sampling-and-simulations.html"><i class="fa fa-check"></i><b>13</b> Sampling and simulations</a>
<ul>
<li class="chapter" data-level="13.1" data-path="sampling-and-simulations.html"><a href="sampling-and-simulations.html#estimating-mean-of-a-normal-distribution-via-resampling"><i class="fa fa-check"></i><b>13.1</b> Estimating mean of a normal distribution via resampling</a></li>
<li class="chapter" data-level="13.2" data-path="sampling-and-simulations.html"><a href="sampling-and-simulations.html#bootstrapping-via-boot-library"><i class="fa fa-check"></i><b>13.2</b> Bootstrapping via boot library</a></li>
<li class="chapter" data-level="13.3" data-path="sampling-and-simulations.html"><a href="sampling-and-simulations.html#more-samples-give-you-more-confidence"><i class="fa fa-check"></i><b>13.3</b> More samples give you more confidence</a></li>
<li class="chapter" data-level="13.4" data-path="sampling-and-simulations.html"><a href="sampling-and-simulations.html#adding-average-sample-mean"><i class="fa fa-check"></i><b>13.4</b> Adding average sample mean</a></li>
<li class="chapter" data-level="13.5" data-path="sampling-and-simulations.html"><a href="sampling-and-simulations.html#practice-makes-perfect"><i class="fa fa-check"></i><b>13.5</b> Practice makes perfect</a></li>
<li class="chapter" data-level="13.6" data-path="sampling-and-simulations.html"><a href="sampling-and-simulations.html#starting-with-basics"><i class="fa fa-check"></i><b>13.6</b> Starting with basics</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="statistical-modeling.html"><a href="statistical-modeling.html"><i class="fa fa-check"></i><b>14</b> Statistical modeling</a>
<ul>
<li class="chapter" data-level="14.1" data-path="statistical-modeling.html"><a href="statistical-modeling.html#correlation"><i class="fa fa-check"></i><b>14.1</b> Correlation</a></li>
<li class="chapter" data-level="14.2" data-path="statistical-modeling.html"><a href="statistical-modeling.html#correlation-in-practice"><i class="fa fa-check"></i><b>14.2</b> Correlation in practice</a></li>
<li class="chapter" data-level="14.3" data-path="statistical-modeling.html"><a href="statistical-modeling.html#pairwise-comparisons"><i class="fa fa-check"></i><b>14.3</b> Pairwise comparisons</a></li>
<li class="chapter" data-level="14.4" data-path="statistical-modeling.html"><a href="statistical-modeling.html#t-tests-in-practice"><i class="fa fa-check"></i><b>14.4</b> T-tests in practice</a></li>
<li class="chapter" data-level="14.5" data-path="statistical-modeling.html"><a href="statistical-modeling.html#formula-notation"><i class="fa fa-check"></i><b>14.5</b> Formula notation</a></li>
<li class="chapter" data-level="14.6" data-path="statistical-modeling.html"><a href="statistical-modeling.html#using-t-test-via-formula"><i class="fa fa-check"></i><b>14.6</b> Using t-test via formula</a></li>
<li class="chapter" data-level="14.7" data-path="statistical-modeling.html"><a href="statistical-modeling.html#anova"><i class="fa fa-check"></i><b>14.7</b> ANOVA</a></li>
<li class="chapter" data-level="14.8" data-path="statistical-modeling.html"><a href="statistical-modeling.html#almost-everything-is-a-linear-regression-model"><i class="fa fa-check"></i><b>14.8</b> (Almost) everything is a linear regression model</a></li>
<li class="chapter" data-level="14.9" data-path="statistical-modeling.html"><a href="statistical-modeling.html#GLMM"><i class="fa fa-check"></i><b>14.9</b> (Generalized) Linear Models</a></li>
<li class="chapter" data-level="14.10" data-path="statistical-modeling.html"><a href="statistical-modeling.html#resampling-a-linear-model"><i class="fa fa-check"></i><b>14.10</b> Resampling a linear model</a></li>
<li class="chapter" data-level="14.11" data-path="statistical-modeling.html"><a href="statistical-modeling.html#generalized-linear-mixed-models"><i class="fa fa-check"></i><b>14.11</b> (Generalized) Linear Mixed Models</a></li>
<li class="chapter" data-level="14.12" data-path="statistical-modeling.html"><a href="statistical-modeling.html#disclaimer-repeated"><i class="fa fa-check"></i><b>14.12</b> Disclaimer, repeated</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="practice.html"><a href="practice.html"><i class="fa fa-check"></i><b>15</b> Practice</a>
<ul>
<li class="chapter" data-level="15.1" data-path="practice.html"><a href="practice.html#bad-names-to-good-names"><i class="fa fa-check"></i><b>15.1</b> Bad names to good names</a></li>
<li class="chapter" data-level="15.2" data-path="practice.html"><a href="practice.html#participant-id"><i class="fa fa-check"></i><b>15.2</b> Participant ID</a></li>
<li class="chapter" data-level="15.3" data-path="practice.html"><a href="practice.html#factors-1"><i class="fa fa-check"></i><b>15.3</b> Factors</a></li>
<li class="chapter" data-level="15.4" data-path="practice.html"><a href="practice.html#response-times"><i class="fa fa-check"></i><b>15.4</b> Response times</a></li>
<li class="chapter" data-level="15.5" data-path="practice.html"><a href="practice.html#accuracy"><i class="fa fa-check"></i><b>15.5</b> Accuracy</a></li>
<li class="chapter" data-level="15.6" data-path="practice.html"><a href="practice.html#physiological-signal"><i class="fa fa-check"></i><b>15.6</b> Physiological signal</a></li>
<li class="chapter" data-level="15.7" data-path="practice.html"><a href="practice.html#wrap-up-2"><i class="fa fa-check"></i><b>15.7</b> Wrap up</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://alexander-pastukhov.github.io/">Alexander (Sasha) Pastukhov</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data analysis using R for Psychology and Social Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="strings" class="section level1" number="12">
<h1><span class="header-section-number">Seminar 12</span> Working with strings</h1>
<p>When working with strings, I strongly suggest consulting a manual and vignettes of the <a href="https://stringr.tidyverse.org/index.html">stringr</a> package. It has many functions that cover most needs. Grab <a href="notebooks/Seminar%2012%20-%20strings.Rmd">exercise notebook</a> before we start.</p>
<div id="warming-up" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> Warming up</h2>
<p>Before we start working with strings, let us warm up by preprocessing <a href="data/bands-adaptation.csv">band-adaptation.csv</a> that we will be working with.</p>
<ol style="list-style-type: decimal">
<li>Read it (try specifying the URL instead of the local filename).Do not forget to specify column types!</li>
<li>compute proportion of “same” responses as a using <code>Nsame</code> (number of “same” responses) and <code>Ntotal</code> (total number of trials).</li>
<li>Convert <code>Prime</code> and <code>Probe</code> column to factors with the order “Sphere,” “Quadro,” “Dual,” “Single.”</li>
<li>Compute <a href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/median.html">median</a> and <a href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/mad.html">median absolute deviation from the median</a> for <code>Psame</code> for all combinations of <code>Prime</code> and <code>Probe</code>.</li>
</ol>
Your table should look as follows:
<table>
<caption>
<span id="tab:unnamed-chunk-293">Table 12.1: </span>bands_df
</caption>
<thead>
<tr>
<th style="text-align:left;">
Prime
</th>
<th style="text-align:left;">
Probe
</th>
<th style="text-align:right;">
Pmedian
</th>
<th style="text-align:right;">
Pmad
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Sphere
</td>
<td style="text-align:left;">
Sphere
</td>
<td style="text-align:right;">
0.13
</td>
<td style="text-align:right;">
0.06
</td>
</tr>
<tr>
<td style="text-align:left;">
Sphere
</td>
<td style="text-align:left;">
Quadro
</td>
<td style="text-align:right;">
0.13
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
Sphere
</td>
<td style="text-align:left;">
Dual
</td>
<td style="text-align:right;">
0.17
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
Sphere
</td>
<td style="text-align:left;">
Single
</td>
<td style="text-align:right;">
0.32
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;">
Quadro
</td>
<td style="text-align:left;">
Sphere
</td>
<td style="text-align:right;">
0.19
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;">
Quadro
</td>
<td style="text-align:left;">
Quadro
</td>
<td style="text-align:right;">
0.12
</td>
<td style="text-align:right;">
0.12
</td>
</tr>
<tr>
<td style="text-align:left;">
Quadro
</td>
<td style="text-align:left;">
Dual
</td>
<td style="text-align:right;">
0.21
</td>
<td style="text-align:right;">
0.19
</td>
</tr>
<tr>
<td style="text-align:left;">
Quadro
</td>
<td style="text-align:left;">
Single
</td>
<td style="text-align:right;">
0.38
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;">
Dual
</td>
<td style="text-align:left;">
Sphere
</td>
<td style="text-align:right;">
0.15
</td>
<td style="text-align:right;">
0.15
</td>
</tr>
<tr>
<td style="text-align:left;">
Dual
</td>
<td style="text-align:left;">
Quadro
</td>
<td style="text-align:right;">
0.30
</td>
<td style="text-align:right;">
0.14
</td>
</tr>
<tr>
<td style="text-align:left;">
Dual
</td>
<td style="text-align:left;">
Dual
</td>
<td style="text-align:right;">
0.27
</td>
<td style="text-align:right;">
0.15
</td>
</tr>
<tr>
<td style="text-align:left;">
Dual
</td>
<td style="text-align:left;">
Single
</td>
<td style="text-align:right;">
0.48
</td>
<td style="text-align:right;">
0.16
</td>
</tr>
<tr>
<td style="text-align:left;">
Single
</td>
<td style="text-align:left;">
Sphere
</td>
<td style="text-align:right;">
0.34
</td>
<td style="text-align:right;">
0.18
</td>
</tr>
<tr>
<td style="text-align:left;">
Single
</td>
<td style="text-align:left;">
Quadro
</td>
<td style="text-align:right;">
0.30
</td>
<td style="text-align:right;">
0.20
</td>
</tr>
<tr>
<td style="text-align:left;">
Single
</td>
<td style="text-align:left;">
Dual
</td>
<td style="text-align:right;">
0.48
</td>
<td style="text-align:right;">
0.12
</td>
</tr>
<tr>
<td style="text-align:left;">
Single
</td>
<td style="text-align:left;">
Single
</td>
<td style="text-align:right;">
0.51
</td>
<td style="text-align:right;">
0.18
</td>
</tr>
</tbody>
</table>
<div class="infobox practice">
<p>Do exercise 1.</p>
</div>
</div>
<div id="glue" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> Formatting strings via <code>glue()</code></h2>
The table above gives us information about <em>median</em> probability of seeing the same rotation and about its absolute deviation from the median. However, it would be more convenient for a reader we would combine these two pieces of information into a single entry in form for of “<median> ± <MAD>.” Plus, it would be easier to see the pattern in a square table with one <code>Prime</code> per row and one <code>Probe</code> per column. The table I have in mind look like this:
<table>
<caption>
<span id="tab:unnamed-chunk-294">Table 12.2: </span>Probability of persistence, median ± MAD
</caption>
<thead>
<tr>
<th style="text-align:center;">
Prime
</th>
<th style="text-align:center;">
Sphere
</th>
<th style="text-align:center;">
Quadro
</th>
<th style="text-align:center;">
Dual
</th>
<th style="text-align:center;">
Single
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Sphere
</td>
<td style="text-align:center;">
0.13 ± 0.06
</td>
<td style="text-align:center;">
0.13 ± 0.04
</td>
<td style="text-align:center;">
0.17 ± 0.1
</td>
<td style="text-align:center;">
0.32 ± 0.08
</td>
</tr>
<tr>
<td style="text-align:center;">
Quadro
</td>
<td style="text-align:center;">
0.19 ± 0.07
</td>
<td style="text-align:center;">
0.12 ± 0.12
</td>
<td style="text-align:center;">
0.21 ± 0.19
</td>
<td style="text-align:center;">
0.38 ± 0.07
</td>
</tr>
<tr>
<td style="text-align:center;">
Dual
</td>
<td style="text-align:center;">
0.15 ± 0.15
</td>
<td style="text-align:center;">
0.3 ± 0.14
</td>
<td style="text-align:center;">
0.27 ± 0.15
</td>
<td style="text-align:center;">
0.48 ± 0.16
</td>
</tr>
<tr>
<td style="text-align:center;">
Single
</td>
<td style="text-align:center;">
0.34 ± 0.18
</td>
<td style="text-align:center;">
0.3 ± 0.2
</td>
<td style="text-align:center;">
0.48 ± 0.12
</td>
<td style="text-align:center;">
0.51 ± 0.18
</td>
</tr>
</tbody>
</table>
<p>You already know how to perform the second step (pivoting table wider to turn <code>Probe</code> factor levels into columns). For the first step, you need to combine two values into a string. There are different ways to construct this string via <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/sprintf.html">sprintf()</a>, <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/paste.html">paste()</a>, or via <a href="https://glue.tidyverse.org/">glue</a> package. We will start with Tidyverse’s <a href="https://glue.tidyverse.org/reference/glue.html">glue()</a> and explore base R functions later.</p>
<p><a href="https://glue.tidyverse.org/">glue</a> package is part of the Tidyverse, so it should be already installed. However, it is not part of <em>core</em> tidyverse, so it does not get imported automatically via <code>library(tidyverse)</code> and you do need to import it separately or use <code>glue::</code> prefix. Function <a href="https://glue.tidyverse.org/reference/glue.html">glue()</a> allows you to “glue” values and code directly into a string. You simply surround <em>any</em> R code by wiggly brackets inside the string and the result of the code execution is glued in. If you use just a variable, its value will be glued-in. But you can put <em>any</em> code inside, although, the more code you put, the harder it will be to read and understand it.</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="strings.html#cb428-1" aria-hidden="true" tabindex="-1"></a>answer <span class="ot">&lt;-</span> <span class="dv">42</span></span>
<span id="cb428-2"><a href="strings.html#cb428-2" aria-hidden="true" tabindex="-1"></a>bad_answer <span class="ot">&lt;-</span> <span class="dv">41</span></span>
<span id="cb428-3"><a href="strings.html#cb428-3" aria-hidden="true" tabindex="-1"></a>glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">&quot;The answer is {answer}, not {abs(bad_answer / -4)}&quot;</span>)</span></code></pre></div>
<pre><code>## The answer is 42, not 10.25</code></pre>
<p>Use the table that you prepared during exercise 1 to compute a new column with “<median> ± <MAD>” (you will want to use <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Round.html">round()</a> function to restrict values to just 2 digit after the decimal point). Think about <em>when</em> you want to perform this computation (before or after pivoting?) and which column(s?) do you need to pivot wider.</p>
<div class="infobox practice">
<p>Do exercise 2.</p>
</div>
</div>
<div id="paste" class="section level2" number="12.3">
<h2><span class="header-section-number">12.3</span> Formatting strings via <code>paste()</code></h2>
<p>Base R has functions <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/paste.html">paste()</a> and <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/paste.html">paste0()</a> that are conceptually very similar to <a href="https://glue.tidyverse.org/reference/glue.html">glue()</a>. The concatenate a vector a strings into a single string. If you recall, vector values can <a href="tables.html#vectors-are-homogeneous">only be of one (most flexible) type</a>. Therefore, if you have a vector that intersperses string with other values, they will be <em>first</em> converted to strings anyhow. The difference between <code>paste()</code> and <code>paste0()</code> is that the former puts a separator string in-between each value (defaults to <code>' '</code> but you can define your own via <code>sep</code> argument), whereas <code>paste0()</code> uses no separator. We can replicate our <a href="https://glue.tidyverse.org/reference/glue.html">glue()</a> example.</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="strings.html#cb430-1" aria-hidden="true" tabindex="-1"></a>answer <span class="ot">&lt;-</span> <span class="dv">42</span></span>
<span id="cb430-2"><a href="strings.html#cb430-2" aria-hidden="true" tabindex="-1"></a>bad_answer <span class="ot">&lt;-</span> <span class="dv">41</span></span>
<span id="cb430-3"><a href="strings.html#cb430-3" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;The answer is &quot;</span>, answer, <span class="st">&quot;, not &quot;</span>, <span class="fu">abs</span>(bad_answer <span class="sc">/</span> <span class="sc">-</span><span class="dv">4</span>), <span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;The answer is 42, not 10.25&quot;</code></pre>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="strings.html#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;The answer is &quot;</span>, answer, <span class="st">&quot;, not &quot;</span>, <span class="fu">abs</span>(bad_answer <span class="sc">/</span> <span class="sc">-</span><span class="dv">4</span>))</span></code></pre></div>
<pre><code>## [1] &quot;The answer is 42, not 10.25&quot;</code></pre>
<p>Redo exercise 2 but using one of the <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/paste.html">paste</a> functions instead of the <a href="https://glue.tidyverse.org/reference/glue.html">glue()</a>.</p>
<div class="infobox practice">
<p>Do exercise 3.</p>
</div>
</div>
<div id="sprintf" class="section level2" number="12.4">
<h2><span class="header-section-number">12.4</span> Formatting strings via <code>sprintf()</code></h2>
<p>For detailed string formatting, base R has a <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/sprintf.html">sprintf()</a> function that provides a C-style string formatting (same as Python’s original string formatting and a common way to format a string in many programming languages). The general function call is <code>sprintf("string with formatting", value1, value2, value)</code>, where values are are inserted into the string. In <code>"string with formatting"</code>, you specify where you want to put the value via <code>%</code> symbol that is followed by an <em>optional</em> formatting info and the <em>required</em> symbol that defines the <strong>type</strong> of the value. The type symbols are</p>
<ul>
<li><code>s</code> for string</li>
<li><code>d</code> for an integer</li>
<li><code>f</code> for a float value using a “fixed point” decimal notation</li>
<li><code>e</code> for a float value using a scientific notation (e.g., <code>1e2</code>).</li>
<li><code>g</code> for an “optimally” printed float value, so that scientific notation is used for very large or very small values (<em>e.g.</em>, <code>1e+5</code> instead of <code>100000</code> and <code>1-e5</code> for <code>0.00001</code>).</li>
</ul>
<p>Here is an example of formatting a string using an integer:</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="strings.html#cb434-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">&quot;I had %d pancakes for breakfast&quot;</span>, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;I had 10 pancakes for breakfast&quot;</code></pre>
<p>You are not limited to a single value that you can put into a string. You can specify more locations via <code>%</code> but you must make sure that you pass the matching number of values. If there fewer parameters when you specified in the string, you will receive an <em>error</em>. If there are too many, only a <em>warning</em><a href="#fn60" class="footnote-ref" id="fnref60"><sup>60</sup></a>. Before running it, can you figure out which call will actually work (and what will be the output) and which will produce an error or a warning?</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="strings.html#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">&quot;I had %d pancakes and either %d  or %d stakes for dinner&quot;</span>, <span class="dv">2</span>)</span>
<span id="cb436-2"><a href="strings.html#cb436-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">&quot;I had %d pancakes and %d stakes for dinner&quot;</span>, <span class="dv">7</span>, <span class="dv">10</span>)</span>
<span id="cb436-3"><a href="strings.html#cb436-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">&quot;I had %d pancake and %d stakes for dinner&quot;</span>, <span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">10</span>)</span></code></pre></div>
<p>In case of real values you have two options: <code>%f</code> and <code>%g</code>. The latter uses scientific notation (e.g. <code>1e10</code> for <code>10000000000</code>) to make a representation more compact. When formatting floating numbers, you can specify the number of decimal points to be displayed.</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="strings.html#cb437-1" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fl">2.71828182845904523536028747135266249775724709369995</span></span>
<span id="cb437-2"><a href="strings.html#cb437-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">&quot;Euler&#39;s number is roughly %.4f&quot;</span>, e)</span></code></pre></div>
<pre><code>## [1] &quot;Euler&#39;s number is roughly 2.7183&quot;</code></pre>
<p>Note that as most functions in R, <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/sprintf.html">sprintf()</a> is vectorized so when you pass a vector of values it will generate a <em>vector</em> of strings with one formatted string for a value.</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="strings.html#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">&quot;The number is %d&quot;</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [1] &quot;The number is 2&quot; &quot;The number is 3&quot;</code></pre>
<p>This means that you can use <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/sprintf.html">sprintf()</a> to work on column both in base R and inside <a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a> Tidyverse verb.</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="strings.html#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">Number =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb441-2"><a href="strings.html#cb441-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Message =</span> <span class="fu">sprintf</span>(<span class="st">&quot;The number is %d&quot;</span>, Number)) <span class="sc">%&gt;%</span></span>
<span id="cb441-3"><a href="strings.html#cb441-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Number
</th>
<th style="text-align:left;">
Message
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
The number is 1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
The number is 2
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
The number is 3
</td>
</tr>
</tbody>
</table>
<p>Redo exercise #2 but use <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/sprintf.html">sprintf()</a> instead of <a href="https://glue.tidyverse.org/reference/glue.html">glue()</a>.</p>
<div class="infobox practice">
<p>Do exercise 4.</p>
</div>
</div>
<div id="extracting-information-from-a-string" class="section level2" number="12.5">
<h2><span class="header-section-number">12.5</span> Extracting information from a string</h2>
<p>Previous exercises dealt with combining various bits of information into a single string. Often, you also need to do the opposite: extract bits of information from a single string. For example, in the toy table on face perception, we have been working with, <code>Face</code> column code gender of the face <code>"M"</code> (table is short but you can easily assume that faces of both genders were used) and the second is its index (<code>1</code> and <code>2</code>). When we worked with <a href="data/persistence.csv">persistence</a>, <code>Participant</code> column encoded year of birth and gender, whereas <code>Session</code> contained detailed information about year, month, day, hour, minutes, and seconds all merged together. There are several ways to extract this information, either by extracting one piece at a time via <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/substr.html">substr()</a> or string processing library <a href="https://stringr.tidyverse.org/">stringr</a>. Alternatively, you can split a string column into several columns via <a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a> or <a href="https://tidyr.tidyverse.org/reference/extract.html">extract()</a> functions.</p>
</div>
<div id="splitting-strings-via-separate" class="section level2" number="12.6">
<h2><span class="header-section-number">12.6</span> Splitting strings via <code>separate()</code></h2>
<p>Function <a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a> is part of tidyverse and its use is very straightforward: you pass 1) the name of the column that you want to split, 2) names of the columns it needs to be split into, 3) a separator symbol or indexes of splitting positions. Examples using the face table should make it clear. Reminder, this is the original wide table and we want to separate <code>Face</code> into <code>FaceGender</code> and <code>FaceIndex</code>.</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="strings.html#cb442-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="ot">&lt;-</span> </span>
<span id="cb442-2"><a href="strings.html#cb442-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">Participant =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>),</span>
<span id="cb442-3"><a href="strings.html#cb442-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">Face =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;M-1&quot;</span>, <span class="st">&quot;M-2&quot;</span>), <span class="dv">2</span>), </span>
<span id="cb442-4"><a href="strings.html#cb442-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">Symmetry =</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">3</span>),</span>
<span id="cb442-5"><a href="strings.html#cb442-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Attractiveness =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">7</span>),</span>
<span id="cb442-6"><a href="strings.html#cb442-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Trustworthiness =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb442-7"><a href="strings.html#cb442-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb442-8"><a href="strings.html#cb442-8" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(widish_df)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Participant
</th>
<th style="text-align:left;">
Face
</th>
<th style="text-align:right;">
Symmetry
</th>
<th style="text-align:right;">
Attractiveness
</th>
<th style="text-align:right;">
Trustworthiness
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
M-1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
M-2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
M-1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
M-2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<p>As there is a very convenient “dash” between the two, we can use it for a separator symbol:</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="strings.html#cb443-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb443-2"><a href="strings.html#cb443-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:center;">
Participant
</th>
<th style="text-align:center;">
FaceGender
</th>
<th style="text-align:center;">
FaceIndex
</th>
<th style="text-align:center;">
Symmetry
</th>
<th style="text-align:center;">
Attractiveness
</th>
<th style="text-align:center;">
Trustworthiness
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
3
</td>
</tr>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
2
</td>
</tr>
</tbody>
</table>
<p>Note that the original <code>Face</code> column is gone. We can keep it via <code>remove=FALSE</code> option</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="strings.html#cb444-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb444-2"><a href="strings.html#cb444-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:center;">
Participant
</th>
<th style="text-align:center;">
Face
</th>
<th style="text-align:center;">
FaceGender
</th>
<th style="text-align:center;">
FaceIndex
</th>
<th style="text-align:center;">
Symmetry
</th>
<th style="text-align:center;">
Attractiveness
</th>
<th style="text-align:center;">
Trustworthiness
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
M-1
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
3
</td>
</tr>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
M-2
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
M-1
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
M-2
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
2
</td>
</tr>
</tbody>
</table>
<p>We also do not need to extract <em>all</em> information. For example, we can extract only face gender or face index. To get only the gender, we only specify <em>one</em> <code>into</code> column and add <code>extra="drop"</code> parameter, telling <code>separate()</code> to drop any extra piece it obtained:</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="strings.html#cb445-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb445-2"><a href="strings.html#cb445-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;Gender&quot;</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>, <span class="at">extra=</span><span class="st">&quot;drop&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:center;">
Participant
</th>
<th style="text-align:center;">
Face
</th>
<th style="text-align:center;">
Gender
</th>
<th style="text-align:center;">
Symmetry
</th>
<th style="text-align:center;">
Attractiveness
</th>
<th style="text-align:center;">
Trustworthiness
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
M-1
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
3
</td>
</tr>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
M-2
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
M-1
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
M-2
</td>
<td style="text-align:center;">
M
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
2
</td>
</tr>
</tbody>
</table>
<p>Alternatively, we can explicitly <em>ignore</em> pieces by using <code>NA</code> for their column name:</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="strings.html#cb446-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb446-2"><a href="strings.html#cb446-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;Gender&quot;</span>, <span class="cn">NA</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="strings.html#cb447-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb447-2"><a href="strings.html#cb447-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;Gender&quot;</span>, <span class="cn">NA</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb447-3"><a href="strings.html#cb447-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Participant
</th>
<th style="text-align:left;">
Face
</th>
<th style="text-align:left;">
Gender
</th>
<th style="text-align:right;">
Symmetry
</th>
<th style="text-align:right;">
Attractiveness
</th>
<th style="text-align:right;">
Trustworthiness
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
M-1
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
M-2
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
M-1
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
M-2
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<p>What about keeping only the <em>second</em> piece in a <code>FaceIndex</code> column? We ignore the first one via <code>NA</code></p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="strings.html#cb448-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb448-2"><a href="strings.html#cb448-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">&quot;Index&quot;</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="strings.html#cb449-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb449-2"><a href="strings.html#cb449-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">&quot;Index&quot;</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb449-3"><a href="strings.html#cb449-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">align =</span> <span class="st">&quot;c&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:center;">
Participant
</th>
<th style="text-align:center;">
Face
</th>
<th style="text-align:center;">
Index
</th>
<th style="text-align:center;">
Symmetry
</th>
<th style="text-align:center;">
Attractiveness
</th>
<th style="text-align:center;">
Trustworthiness
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
M-1
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
3
</td>
</tr>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
M-2
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
M-1
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
M-2
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
2
</td>
</tr>
</tbody>
</table>
Let’s practice. Use <a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a> to preprocess <a href="data/persistence.zip">persistence</a> data and create two new columns for hour and minutes from <code>Session</code> column. Do it in a single pipeline, starting with reading all files (use tidyverse <a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a> and specify column types!) and renaming <code>Shape1</code> (<code>Prime</code>) and <code>Shape2</code> (<code>Probe</code>) columns. You results should look like this, think about columns that you drop or keep (this is only first four rows, think of how you can limit your output the same way via <a href="https://stat.ethz.ch/R-manual/R-devel/library/utils/html/head.html">head()</a> function):
<table>
<thead>
<tr>
<th style="text-align:left;">
Participant
</th>
<th style="text-align:left;">
Hour
</th>
<th style="text-align:left;">
Minutes
</th>
<th style="text-align:right;">
Block
</th>
<th style="text-align:right;">
Trial
</th>
<th style="text-align:right;">
OnsetDelay
</th>
<th style="text-align:left;">
Bias
</th>
<th style="text-align:left;">
Prime
</th>
<th style="text-align:left;">
Probe
</th>
<th style="text-align:left;">
Response1
</th>
<th style="text-align:left;">
Response2
</th>
<th style="text-align:right;">
RT1
</th>
<th style="text-align:right;">
RT2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AKM1995M
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.5746952
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
stripes-8
</td>
<td style="text-align:left;">
stripes-4
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:right;">
5.055481
</td>
<td style="text-align:right;">
1.0238089
</td>
</tr>
<tr>
<td style="text-align:left;">
AKM1995M
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.5741707
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
stripes-4
</td>
<td style="text-align:left;">
heavy poles sphere
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:right;">
2.969246
</td>
<td style="text-align:right;">
0.8239294
</td>
</tr>
<tr>
<td style="text-align:left;">
AKM1995M
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.5082200
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
stripes-2
</td>
<td style="text-align:left;">
stripes-2
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:right;">
3.162331
</td>
<td style="text-align:right;">
0.6718403
</td>
</tr>
<tr>
<td style="text-align:left;">
AKM1995M
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.6065058
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
stripes-8
</td>
<td style="text-align:left;">
stripes-2
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:right;">
1.021163
</td>
<td style="text-align:right;">
0.5919555
</td>
</tr>
</tbody>
</table>
<div class="infobox practice">
<p>Do exercise 5.</p>
</div>
As noted above, if position of individual pieces is fixed, you can specify it explicitly. Let us make out toy table a bit more explicit
<table>
<thead>
<tr>
<th style="text-align:center;">
Participant
</th>
<th style="text-align:center;">
Face
</th>
<th style="text-align:center;">
Symmetry
</th>
<th style="text-align:center;">
Attractiveness
</th>
<th style="text-align:center;">
Trustworthiness
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
M-01
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
3
</td>
</tr>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
F-02
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
M-01
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
F-02
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
2
</td>
</tr>
</tbody>
</table>
<p>For our toy faces table, the first piece is the gender and the last one is its index. Thus, we tell <code>separate()</code> starting position each pieces, starting with the <em>second</em> one:</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="strings.html#cb450-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb450-2"><a href="strings.html#cb450-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="st">&quot;Dash&quot;</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span></code></pre></div>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="strings.html#cb451-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb451-2"><a href="strings.html#cb451-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="st">&quot;Dash&quot;</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">remove=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb451-3"><a href="strings.html#cb451-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Participant
</th>
<th style="text-align:left;">
Face
</th>
<th style="text-align:left;">
FaceGender
</th>
<th style="text-align:left;">
Dash
</th>
<th style="text-align:left;">
FaceIndex
</th>
<th style="text-align:right;">
Symmetry
</th>
<th style="text-align:right;">
Attractiveness
</th>
<th style="text-align:right;">
Trustworthiness
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
M-01
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
01
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
F-02
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
02
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
M-01
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
01
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
F-02
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
02
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<p>Here, I’ve create <code>Dash</code> column for the separator but, of course, I could have omitted it via <code>NA</code> column name.</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="strings.html#cb452-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb452-2"><a href="strings.html#cb452-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span></code></pre></div>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="strings.html#cb453-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb453-2"><a href="strings.html#cb453-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb453-3"><a href="strings.html#cb453-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Participant
</th>
<th style="text-align:left;">
FaceGender
</th>
<th style="text-align:left;">
FaceIndex
</th>
<th style="text-align:right;">
Symmetry
</th>
<th style="text-align:right;">
Attractiveness
</th>
<th style="text-align:right;">
Trustworthiness
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
01
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
02
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
01
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
02
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<p>Practice time! Using same <a href="data/persistence.csv">persistence</a> data extract birth year and gender of participants from <code>Participant</code> code (however, keep the code column). Put a nice extra touch by converting year to a number (<a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a> splits a string into strings as well) and gender into a factor type with better labels. Here is how should look like:</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
Participant
</th>
<th style="text-align:right;">
BirthYear
</th>
<th style="text-align:left;">
Gender
</th>
<th style="text-align:left;">
Hour
</th>
<th style="text-align:left;">
Minutes
</th>
<th style="text-align:right;">
Block
</th>
<th style="text-align:right;">
Trial
</th>
<th style="text-align:right;">
OnsetDelay
</th>
<th style="text-align:left;">
Bias
</th>
<th style="text-align:left;">
Prime
</th>
<th style="text-align:left;">
Probe
</th>
<th style="text-align:left;">
Response1
</th>
<th style="text-align:left;">
Response2
</th>
<th style="text-align:right;">
RT1
</th>
<th style="text-align:right;">
RT2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AKM1995M
</td>
<td style="text-align:right;">
1995
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.5746952
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
stripes-8
</td>
<td style="text-align:left;">
stripes-4
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:right;">
5.055481
</td>
<td style="text-align:right;">
1.0238089
</td>
</tr>
<tr>
<td style="text-align:left;">
AKM1995M
</td>
<td style="text-align:right;">
1995
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.5741707
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
stripes-4
</td>
<td style="text-align:left;">
heavy poles sphere
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:right;">
2.969246
</td>
<td style="text-align:right;">
0.8239294
</td>
</tr>
<tr>
<td style="text-align:left;">
AKM1995M
</td>
<td style="text-align:right;">
1995
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.5082200
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
stripes-2
</td>
<td style="text-align:left;">
stripes-2
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:right;">
3.162331
</td>
<td style="text-align:right;">
0.6718403
</td>
</tr>
<tr>
<td style="text-align:left;">
AKM1995M
</td>
<td style="text-align:right;">
1995
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.6065058
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
stripes-8
</td>
<td style="text-align:left;">
stripes-2
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:right;">
1.021163
</td>
<td style="text-align:right;">
0.5919555
</td>
</tr>
</tbody>
</table>
<div class="infobox practice">
<p>Do exercise 6.</p>
</div>
</div>
<div id="extracting-a-substring-when-you-know-its-location" class="section level2" number="12.7">
<h2><span class="header-section-number">12.7</span> Extracting a substring when you know its location</h2>
<p>Base R provides a function extract a substring (or many substrings) via <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/substr.html">substr()</a> function (you can also its alias <code>substring()</code>). It takes a string (or a vector of strings) and vectors with <code>start</code> and <code>stop</code> indexes of each substring.</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="strings.html#cb454-1" aria-hidden="true" tabindex="-1"></a>face_img <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;M01&quot;</span>, <span class="st">&quot;M02&quot;</span>, <span class="st">&quot;F01&quot;</span>, <span class="st">&quot;F02&quot;</span>)</span>
<span id="cb454-2"><a href="strings.html#cb454-2" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(face_img, <span class="dv">2</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;01&quot; &quot;02&quot; &quot;01&quot; &quot;02&quot;</code></pre>
<p>Repeat exercise 6 but use <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/substr.html">substr()</a> to extract each column (<code>BirthYear</code> and <code>Gender</code>) from the participant code.</p>
<div class="infobox practice">
<p>Do exercise 7.</p>
</div>
<p>Tidyverse has its own <a href="https://stringr.tidyverse.org/">stringr</a> library for working with strings. Its uses a consistent naming scheme <code>str_&lt;action&gt;</code> for its function and covers virtually all tasks that are related to working with strings. <a href="https://stringr.tidyverse.org/">stringr</a> equivalent of <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/substr.html">substr()</a> is <a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub()</a> that behaves similarly.</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="strings.html#cb456-1" aria-hidden="true" tabindex="-1"></a>face_img <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;M01&quot;</span>, <span class="st">&quot;M02&quot;</span>, <span class="st">&quot;F01&quot;</span>, <span class="st">&quot;F02&quot;</span>)</span>
<span id="cb456-2"><a href="strings.html#cb456-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(face_img, <span class="dv">2</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;01&quot; &quot;02&quot; &quot;01&quot; &quot;02&quot;</code></pre>
<p>Repeat exercise 7 but using <a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub()</a> function.</p>
<div class="infobox practice">
<p>Do exercise 8.</p>
</div>
</div>
<div id="detecting-a-substring-using-regular-expressions" class="section level2" number="12.8">
<h2><span class="header-section-number">12.8</span> Detecting a substring using regular expressions</h2>
<blockquote>
<p>Some people, when confronted with a problem, think “I know, I’ll use regular expressions.” Now they have two problems.</p>
<p><em>Jamie Zawinsk</em></p>
</blockquote>
<p>One of the most powerful ways to work with strings is via <a href="https://en.wikipedia.org/wiki/Regular_expression">regular expressions</a> that allow you to code a flexible pattern that is matched to a substring within a string. For example, you can detect whether a string contains a number without knowing where it is located. Here a pattern <code>"\\d{3}"</code> means that we are looking for 3 (hence the <code>{3}</code>) digits (hence the <code>\\d</code>)</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="strings.html#cb458-1" aria-hidden="true" tabindex="-1"></a>QandA <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;What was the answer, 42, right?&quot;</span>, <span class="st">&quot;No idea! What could it be, 423?&quot;</span>)</span>
<span id="cb458-2"><a href="strings.html#cb458-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">d{3}&quot;</span>, QandA)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE</code></pre>
<p>Stringr library has it own version with a more obvious name <a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a><a href="#fn61" class="footnote-ref" id="fnref61"><sup>61</sup></a>. Note, however, the reverse order of arguments, as <code>str_</code> function always take (a vector of) strings as a first parameter</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="strings.html#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(QandA, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d{3}&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE</code></pre>
<p>You can also look for 1 or more digits (which is <code>+</code>)</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="strings.html#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(QandA, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d+&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE TRUE</code></pre>
<p>Or for a specific word</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="strings.html#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(QandA, <span class="st">&quot;What&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE TRUE</code></pre>
<p>Or for a specific word only at the beginning (<code>^</code>) of the string</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="strings.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(QandA, <span class="st">&quot;^What&quot;</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE</code></pre>
<p>When it comes to regular expressions, what I have shown you so far is not even a tip of an iceberg, it is a tip of a tip of an iceberg at best. They are very flexible, allowing you to code very complicated patterns but they are also hard to read and, therefore, hard to debug<a href="#fn62" class="footnote-ref" id="fnref62"><sup>62</sup></a>. For example, this is a regular expression to check validity on an email address<a href="#fn63" class="footnote-ref" id="fnref63"><sup>63</sup></a></p>
<pre><code>(?:[a-z0-9!#$%&amp;&#39;*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;&#39;*+/=?^_`{|}~-]+)*|&quot;(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*&quot;)@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])</code></pre>
<p>Still, if you need to work with text they are indispensable, so your should remember about them. When facing an actual task grab a <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/strings.pdf">cheatsheet</a> and use an <a href="https://spannbaueradam.shinyapps.io/r_regex_tester/">online expression tester</a> to debug the pattern.</p>
<p>In the next exercise, use a regular expression to <a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a> out Primes and Probes that <em>end</em> with a <em>single</em> digit. I know that all of them end with a single digit, if digit is in them, so you can make a very simple expression that would do the job. But I want you to practice working with the <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/strings.pdf">cheatsheet</a>, so it must specify that only one digit is allowed and that it must be the last symbol. When you pattern works, you should end up with a table where all Primes and Probes are <code>"heavy poles sphere"</code>.</p>
<div class="infobox practice">
<p>Do exercise 9.</p>
</div>
<p>Now let us practice extracting the relevant information via pattern matching. Use <a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract()</a> to extract the participants unique code, the first three letters of <code>Participant</code> column. Again, here you can simply use a <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/substr.html">substr()</a> but I want you write a pattern that matches 1) one or more 2) upper case letters 3) at the beginning of the string.</p>
<div class="infobox practice">
<p>Do exercise 10.</p>
</div>
Finally, let us practice in replacing part of a string via regular expressions. Use <a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace()</a> to anonymize the birth year of our participants. You need to replace the four digits that represent their birth year with a <em>single</em> <code>"-"</code>. The table should look as follows:
<table>
<thead>
<tr>
<th style="text-align:left;">
Participant
</th>
<th style="text-align:left;">
Hour
</th>
<th style="text-align:left;">
Minutes
</th>
<th style="text-align:right;">
Block
</th>
<th style="text-align:right;">
Trial
</th>
<th style="text-align:right;">
OnsetDelay
</th>
<th style="text-align:left;">
Bias
</th>
<th style="text-align:left;">
Prime
</th>
<th style="text-align:left;">
Probe
</th>
<th style="text-align:left;">
Response1
</th>
<th style="text-align:left;">
Response2
</th>
<th style="text-align:right;">
RT1
</th>
<th style="text-align:right;">
RT2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AKM-M
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.5746952
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
stripes-8
</td>
<td style="text-align:left;">
stripes-4
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:right;">
5.055481
</td>
<td style="text-align:right;">
1.0238089
</td>
</tr>
<tr>
<td style="text-align:left;">
AKM-M
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.5741707
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
stripes-4
</td>
<td style="text-align:left;">
heavy poles sphere
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:right;">
2.969246
</td>
<td style="text-align:right;">
0.8239294
</td>
</tr>
<tr>
<td style="text-align:left;">
AKM-M
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.5082200
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
stripes-2
</td>
<td style="text-align:left;">
stripes-2
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
left
</td>
<td style="text-align:right;">
3.162331
</td>
<td style="text-align:right;">
0.6718403
</td>
</tr>
<tr>
<td style="text-align:left;">
AKM-M
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.6065058
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
stripes-8
</td>
<td style="text-align:left;">
stripes-2
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
right
</td>
<td style="text-align:right;">
1.021163
</td>
<td style="text-align:right;">
0.5919555
</td>
</tr>
</tbody>
</table>
<div class="infobox practice">
<p>Do exercise 11.</p>
</div>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="60">
<li id="fn60"><p>Talk about consistency…<a href="strings.html#fnref60" class="footnote-back">↩︎</a></p></li>
<li id="fn61"><p>GREP stands for Global Regular Expression Print.<a href="strings.html#fnref61" class="footnote-back">↩︎</a></p></li>
<li id="fn62"><p>Hence, the quote at the beginning of the section.<a href="strings.html#fnref62" class="footnote-back">↩︎</a></p></li>
<li id="fn63"><p>This an <a href="https://emailregex.com/">official RCF 5322 standard</a> that should work on <em>almost</em> all of the valid email addresses.<a href="strings.html#fnref63" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="missing-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sampling-and-simulations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["data-analysis-using-r-for-psychology.pdf", "data-analysis-using-r-for-psychology.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
