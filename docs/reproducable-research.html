<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 1 Reproducable Research: Projects and Markdown Notebooks | Data analysis using R for Psychology and Social Science</title>
<meta name="author" content="Alexander (Sasha) Pastukhov">
<meta name="description" content="Our aim is to create reproducible research and analysis. It is a crucial component of the open science movement but is even more important for your own research or study projects. You want to...">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="Chapter 1 Reproducable Research: Projects and Markdown Notebooks | Data analysis using R for Psychology and Social Science">
<meta property="og:type" content="book">
<meta property="og:description" content="Our aim is to create reproducible research and analysis. It is a crucial component of the open science movement but is even more important for your own research or study projects. You want to...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 1 Reproducable Research: Projects and Markdown Notebooks | Data analysis using R for Psychology and Social Science">
<meta name="twitter:description" content="Our aim is to create reproducible research and analysis. It is a crucial component of the open science movement but is even more important for your own research or study projects. You want to...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link rel="shortcut icon" href="images/R_course_logo.svg">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-QMVBLBE7DV"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QMVBLBE7DV');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data analysis using R for Psychology and Social Science</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introduction</a></li>
<li><a class="" href="software.html">Software</a></li>
<li><a class="active" href="reproducable-research.html"><span class="header-section-number">1</span> Reproducable Research: Projects and Markdown Notebooks</a></li>
<li><a class="" href="vectors.html"><span class="header-section-number">2</span> Vectors! Vectors everywhere!</a></li>
<li><a class="" href="tables.html"><span class="header-section-number">3</span> Tables and Tibbles (and Tribbles)</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">4</span> Functions! Functions everywhere!</a></li>
<li><a class="" href="ggplot2.html"><span class="header-section-number">5</span> ggplot2: Grammar of Graphics</a></li>
<li><a class="" href="dplyr.html"><span class="header-section-number">6</span> Tidyverse: dplyr</a></li>
<li><a class="" href="working-with-factors.html"><span class="header-section-number">7</span> Working with Factors</a></li>
<li><a class="" href="tyding.html"><span class="header-section-number">8</span> Tidyng your data: joins and pivots</a></li>
<li><a class="" href="control-flow-chapter.html"><span class="header-section-number">9</span> Controling computation flow</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">10</span> Missing data</a></li>
<li><a class="" href="strings.html"><span class="header-section-number">11</span> Working with strings</a></li>
<li><a class="" href="sampling-and-simulations.html"><span class="header-section-number">12</span> Sampling and simulations</a></li>
<li><a class="" href="generalized-linear-regression-and-resampling.html"><span class="header-section-number">13</span> (Generalized) Linear regression and Resampling</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/alexander-pastukhov/data-analysis-using-r-for-psychology">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="reproducable-research" class="section level1" number="1">
<h1>
<span class="header-section-number">1</span> Reproducable Research: Projects and Markdown Notebooks<a class="anchor" aria-label="anchor" href="#reproducable-research"><i class="fas fa-link"></i></a>
</h1>
<p>Our aim is to create reproducible research and analysis. It is a crucial component of the open science movement but is even more important for your own research or study projects. You want to create a self-contained well-documented easy-to-understand reproducible analysis. A complete self-sufficient code that others and, most importantly, future-you can easily understand saves you time and gives you a deeper insight into the results (less mystery is better in cases like these). It also makes it easier to communicate your results to other researchers or fellow students.</p>
<p>You should also <em>always</em> consider posting your results and analysis online at public repositories such as <a href="https://osf.io/">OSF</a>, <a href="https://www.scidb.cn/en">Science Data Bank</a>, or <a href="https://github.com/">GitHub</a>. This not only help others but forces you into making such data + analysis archive more thoroughly. That, in turns, makes it easier for future-you to return to the data and the analysis. Using a <a href="https://github.com/">GitHub</a> (private) repository is a good idea even if you are not planning to collaborate with others as it gives you a version-controlled code in a cloud and makes synchronizing it between different machines easy.</p>
<div id="projects" class="section level2" number="1.1">
<h2>
<span class="header-section-number">1.1</span> Projects<a class="anchor" aria-label="anchor" href="#projects"><i class="fas fa-link"></i></a>
</h2>
<p>One of the most annoying features of R is that it looks for files and folders only relative to its “working directory”, which is set via <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/getwd.html">setwd(dir)</a> function. What makes it particularly confusing is that your currently open file may be in some <em>other</em> folder. If you simply use <em>File / Open</em>, navigate to that file and open it, it does not change your working directory. Similarly, in R-Studio you can navigate through file system using <em>Files</em> tab and open some folder you are interested in but that <strong>does not make it a working directory</strong>. You need to click on <em>More</em> and <em>Set As Working Directory</em> to make this work (that trick won’t work for an opened file).</p>
<div class="inline-figure"><img src="images/setwd-gui.png" width="100%" style="display: block; margin: auto;"></div>
<p>In short, it may <em>look</em> that you are working in a particular folder but R will have its own opinion about this. Whenever this happens, it is really confusing and involves a lot of cursing as R cannot find files that you can clearly see with your own eyes. To avoid this, you should organize any program, project or seminar as an <em>R Project</em>, which assumes that all necessary files are in the project folder, which is also the working directory. R Studio has some nice project-based touches as well, like keeping tracking of which files you have open, providing version control, etc. Bottom line, <strong>always</strong> create a new R-project to organize yourself, even if it involves just a single file to try something out. Remember, “Nothing is more permanent than a temporary solution!” Which is why you should <strong>always</strong> write your code, as if it is for a long term project (good style, comprehensible variable names, comments, etc.), otherwise your temporary solution grows into permanent incomprehensible spaghetti code.</p>
<p>Let us create a new project for this seminar. Use <em>File / New Project…</em>, which will give you options of creating it in a new directory (you get to come up with a name), using an existing directory (project will be named after that directory), or check it out from remote repository (if you know <a href="https://git-scm.com/">git</a>, this is very convenient). You can do it either way. This will be a project folder for this seminar and you will need to put all notebooks and external data files into that folder. Next time you need to open it, you can use <em>File / Recent Projects</em> menu, <em>File / Open Project…</em><code>_ menu, or simply open the</code><name-of-your-project>.Rproj` file in that folder.</name-of-your-project></p>
</div>
<div id="rmarkdown" class="section level2" number="1.2">
<h2>
<span class="header-section-number">1.2</span> Quattro and RMarkdown notebooks<a class="anchor" aria-label="anchor" href="#rmarkdown"><i class="fas fa-link"></i></a>
</h2>
<p>There are two very similar notebook formats in R: an older <a href="https://rmarkdown.rstudio.com/">R Markdown</a> and a new <a href="https://quarto.org/">Quatro</a>. On the one hand, the latter is the future, so it would make sense to use Quatro notebooks. On the other hand, there is little practical difference for you, as from a R-only end-user point of view, they differ mostly in how they specify chunk options (more on that later).</p>
<p>Both RMarkdown and Quattro rely on a <a href="https://rmarkdown.rstudio.com/">markdown</a> language to combine formatted text, figures, references (via <a href="http://www.bibtex.org/">bibtex</a>) and cross-references with code<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;This material was prepared using RMarkdown, &lt;a href="(https://yihui.org/knitr/)"&gt;knitr&lt;/a&gt;, and &lt;a href="https://bookdown.org/"&gt;bookdown&lt;/a&gt;&lt;/p&gt;'><sup>7</sup></a>. When a notebook is <a href="https://yihui.org/knitr/">knitted</a>, all the code is ran and its output, such as tables and figures, is inserted into the final document. This allows you to combine the narrative (the background, the methodology, comments, discussion, conclusions, etc.) with the actual code that implements what you described. And, you can be sure that the figures and numbers are the latest correct version.</p>
<p>Notebooks can be knitted into a variety of formats including HTML, PDF, Word document, EPUB book, etc. Thus, instead of creating plots and tables to save them into separate files so you can copy-paste them into your Word file (and then redoing this, if something changed, and trying to find the correct code that you used the last time, and wondering why it does not run anymore…), you simply “knit” the notebook and get the current and complete research report, semester work, presentation, etc. Even more importantly, same goes for others, as they also can knit your notebook and generate its latest version in format they need. All exercises will involve using RMarkdown notebooks, so you need to familiarize yourself with them.</p>
<p>We will start by learning the markdown, which is a family of human-oriented markup languages. Markup is a plain text that includes formatting syntax and can be translated into visually formatted text. For example, HTML and LaTeX are markup languages. The advantage of markup is that you do not need a special program to edit it, any plain text editor will suffice. However, you do need a special program to turn this plain text into the document. For example, you need Latex to compile a PDF or a browser to view HTML properly. However, anyone can read your original file even if they do not have Latex, PDF reader, or a browser installed (you do need Word to read a Word file!). <strong>Markdown</strong> markup language was designed to make formatting simple and unobtrusive, so the plain document is easier to read (you can read HTML but it is hardly fun!). It is not as feature-rich as HTML or LaTeX but covers most of your usual needs and is very easy to learn!</p>
<p>Create a new markdown file via <em>File / New File / Quatro Document…</em> menu. Use <code>Seminar 1: Markdown</code> for its title and HTML as default output format. The new RStudio makes you life easier by giving you a WYSIWYG visual editor option, which you can use later, but for this seminar disable it and learn how to use markdown directly
<img src="images/new-quattro-document.png" width="100%" style="display: block; margin: auto;"></p>
<p>Save the file (press <strong>Ctrl + S</strong> or use <em>File/Save</em> menu) calling it <code>seminar-01</code> (R Studio will add <code>.qmd</code> extension automatically). The file you created is not empty, as R Studio is kind enough to provide an example for you (interestingly, you get a different example if you create RMarkdown file instead). Knit the notebook by clicking on <em>Knit</em> button or pressing <strong>Ctrl+Shift+K</strong> to see how the properly typeset text will look (it will appear in a <em>Viewer</em> tab).</p>
<div id="rmarkdown-template" class="section level3" number="1.2.1">
<h3>
<span class="header-section-number">1.2.1</span> RMarkdown template<a class="anchor" aria-label="anchor" href="#rmarkdown-template"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="images/default-notebook.png" width="100%" style="display: block; margin: auto;"></div>
<p>Let us go through the default RMarkdown notebook that R Studio created for us (it has more content than a default Quatro document) that you can see above or can create yourself via <em>File / New File / R Markdown…</em> (not <em>R notebook</em>!).
<img src="images/notebook-header.png" width="100%" style="display: block; margin: auto;"></p>
<p>The top part between two sets of <code>---</code> is a notebook header with various configuration options written in <a href="https://yaml.org/">YAML</a> (yes, we have two different languages in one file). <code>title</code>, <code>author</code>, and <code>date</code> should be self-explanatory. <code>output</code> defines what kind of output document knitr will generate. You can specify it by hand (e.g., <code>word_document</code>) or just click on drop down next to <code>Knit</code> button and pick the option you like (we will use the default HTML most of the time). These are sufficient for us but there are numerous other options that you can specify, for example, to enable indexing of headers. You can read about this at <a href="https://yihui.org/knitr/">yihui.org/knitr</a>.</p>
<div class="inline-figure"><img src="images/notebook-setup.png" width="100%" style="display: block; margin: auto;"></div>
<p>The next section is the “setup code chunk” that specifies default options for how the code chunks are treated by default (whether they are executed, whether the output, warnings, or messages are shown, etc.). By default code in chunks is run and its output is shown (<code>echo = TRUE</code>) but you can change this behavior on per-chunk basis by pressing the gear button at the top-right. The setup chunk is also a good place to import your libraries (we will talk about this later) as it is always run before any other chunks (so, even if you forgot to run it to load libraries, R Studio will do this for you).</p>
<div class="inline-figure"><img src="images/notebook-text.png" width="100%" style="display: block; margin: auto;"></div>
<p>Next, we have plain text with rmarkdown, which gets translated into formatted text when you click on <em>Knit</em> button. You can write like this anywhere outside of code chunks to explain the logic of your analysis. You should write why and how the analysis is performed but leave technical details on programming to the chunk itself, where you can comment the code.</p>
<div class="inline-figure"><img src="images/notebook-chunk.png" width="100%" style="display: block; margin: auto;"></div>
<p>Finally, we have our first “proper” chunk of code (the “setup” chunk above is a special case). A code chunk is simply the code embedded between
<code>```{r &lt;name of the chunk}</code> and the seconds set of ticks <code>```</code>. Here <code>r</code> specifies that the code inside is written in R language but you can use other languages such as Python (via <a href="https://rstudio.github.io/reticulate/">reticulate</a> package), <a href="https://mc-stan.org/">Stan</a>, or SQL. The <code>name of the chunk</code> is optional but I would recommend to specify it, as it reminds you what this code is about and it makes it easier to navigate in large notebooks. In the bottom-left corner, you can see which chunk or section you are currently at and, if you click on it, you can quickly navigate to a different chunk. If chunks are not explicitly named, they will get labels <code>Chunk 1</code>, <code>Chunk 2</code>, etc. making it hard to distinguish them.</p>
<div class="inline-figure"><img src="images/notebook-navigation.png" width="100%" style="display: block; margin: auto;"></div>
<p>There are additional options that you can specify per chunk (whether to run the code, to show the output, what size the figures should be, etc.). Generally we won’t need these options but you can get an idea about them by looking at the <a href="https://yihui.org/knitr/options/">official manual</a>. You can create a chunk by hand or click on “Create chunk” drop-down list (in this case, it will create the chunk at the position of the cursor)</p>
<div class="inline-figure"><img src="images/notebook-insert-chunk.png" width="100%" style="display: block; margin: auto;"></div>
<p>Finally, you run <strong>all</strong> the code in the chunk by clicking on <em>Run current chunk button</em> at the top-right corner of the chunk or by pressing <strong>Ctrl+Shift+Enter</strong> when the you are inside the chunk. However, you can also run just a <em>single line</em> or only <em>selected lines</em> by pressing <strong>Ctrl+Enter</strong>. The cool thing about RMarkdown in RStudio is that you will see the output of that chunk right below it. This means that you can write you code chunk-by-chunk, ensure that each works as intended and only when knit the entire document. Run the chunks in your notebook to see what I mean.</p>
<div class="inline-figure"><img src="images/notebook-run-chunk.png" width="100%" style="display: block; margin: auto;"></div>
</div>
<div id="quatro-template" class="section level3" number="1.2.2">
<h3>
<span class="header-section-number">1.2.2</span> Quatro template<a class="anchor" aria-label="anchor" href="#quatro-template"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="images/quatro-template.png" width="100%" style="display: block; margin: auto;"></div>
<p>Working with Quatro notebook is very similar but certain YAML header options are different (e.g., <code>format: html</code> instead of <code>output: html_document</code>) and chunk settings are inside the chunk (<code>#| echo: false</code>) instead of being inside curly brackets (<code>{r echo=FALSE}</code>). These differences become important when you go in deeper and want to build a website or write a book using Quatro but won’t matter much for this seminar.</p>
</div>
</div>
<div id="exercise" class="section level2" number="1.3">
<h2>
<span class="header-section-number">1.3</span> Exercise<a class="anchor" aria-label="anchor" href="#exercise"><i class="fas fa-link"></i></a>
</h2>
<p>For the today’s exercise, I want you to familiarize yourself with markdown. Create a Quatro notebook for this. Go to <a href="https://www.markdownguide.org/">markdownguide.org</a> and look at basic and extended syntax (their cheat sheet is also very good). Write any text you want that uses all the formatting and submit the <code>.qmd</code> file to MS Teams. Please note that if you use an external image, you must submit it (zip everything into a single file) and the path that you use must be <em>relative</em>. Remember, if your file path is “c:/Documents/R-seminar/funny.png” chances are I do not have that file and that set of folders on my computer and your markdown won’t render for me.</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="software.html">Software</a></div>
<div class="next"><a href="vectors.html"><span class="header-section-number">2</span> Vectors! Vectors everywhere!</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#reproducable-research"><span class="header-section-number">1</span> Reproducable Research: Projects and Markdown Notebooks</a></li>
<li><a class="nav-link" href="#projects"><span class="header-section-number">1.1</span> Projects</a></li>
<li>
<a class="nav-link" href="#rmarkdown"><span class="header-section-number">1.2</span> Quattro and RMarkdown notebooks</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#rmarkdown-template"><span class="header-section-number">1.2.1</span> RMarkdown template</a></li>
<li><a class="nav-link" href="#quatro-template"><span class="header-section-number">1.2.2</span> Quatro template</a></li>
</ul>
</li>
<li><a class="nav-link" href="#exercise"><span class="header-section-number">1.3</span> Exercise</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/alexander-pastukhov/data-analysis-using-r-for-psychology/blob/master/01-rmarkdown.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/alexander-pastukhov/data-analysis-using-r-for-psychology/edit/master/01-rmarkdown.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data analysis using R for Psychology and Social Science</strong>" was written by Alexander (Sasha) Pastukhov. It was last built on 2023-10-15.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>Please note that this website collects anonymized data via Google analytics. This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
