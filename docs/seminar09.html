<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Seminar 9 Tidyng your data | Data analysis using R for Psychology and Social Science</title>
  <meta name="description" content="Material and exercises for ‘Applied data analysis for psychology using the open-source software R’ seminar." />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="Seminar 9 Tidyng your data | Data analysis using R for Psychology and Social Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Material and exercises for ‘Applied data analysis for psychology using the open-source software R’ seminar." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Seminar 9 Tidyng your data | Data analysis using R for Psychology and Social Science" />
  
  <meta name="twitter:description" content="Material and exercises for ‘Applied data analysis for psychology using the open-source software R’ seminar." />
  

<meta name="author" content="Alexander (Sasha) Pastukhov" />


<meta name="date" content="2021-10-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="seminar08.html"/>
<link rel="next" href="seminar10.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="font-awesome.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data analysis using R for Psychology</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-r"><i class="fa fa-check"></i>Why R?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-tidyverse"><i class="fa fa-check"></i>Why Tidyverse</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-seminar"><i class="fa fa-check"></i>About the seminar</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#thinking-like-a-computer"><i class="fa fa-check"></i>Thinking like a computer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-material"><i class="fa fa-check"></i>About the material</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="software.html"><a href="software.html"><i class="fa fa-check"></i>Software</a>
<ul>
<li class="chapter" data-level="0.1" data-path="software.html"><a href="software.html#install-r"><i class="fa fa-check"></i><b>0.1</b> Installing R</a></li>
<li class="chapter" data-level="0.2" data-path="software.html"><a href="software.html#install-rstudio"><i class="fa fa-check"></i><b>0.2</b> Installing R-Studio</a></li>
<li class="chapter" data-level="0.3" data-path="software.html"><a href="software.html#install-rtools"><i class="fa fa-check"></i><b>0.3</b> Installing RTools</a></li>
<li class="chapter" data-level="" data-path="software.html"><a href="software.html#install.packages"><i class="fa fa-check"></i>Installing packages</a></li>
<li class="chapter" data-level="0.4" data-path="software.html"><a href="software.html#minimal-set-of-packages"><i class="fa fa-check"></i><b>0.4</b> Minimal set of packages</a></li>
<li class="chapter" data-level="0.5" data-path="software.html"><a href="software.html#installr"><i class="fa fa-check"></i><b>0.5</b> Keeping R and packages up-to-date</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="reproducable-research.html"><a href="reproducable-research.html"><i class="fa fa-check"></i><b>1</b> Reproducable Research: Projects and RMarkdown Notebooks</a>
<ul>
<li class="chapter" data-level="1.1" data-path="reproducable-research.html"><a href="reproducable-research.html#projects"><i class="fa fa-check"></i><b>1.1</b> Projects</a></li>
<li class="chapter" data-level="1.2" data-path="reproducable-research.html"><a href="reproducable-research.html#rmarkdown"><i class="fa fa-check"></i><b>1.2</b> RMarkdown</a></li>
<li class="chapter" data-level="1.3" data-path="reproducable-research.html"><a href="reproducable-research.html#exercise"><i class="fa fa-check"></i><b>1.3</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>2</b> Vectors! Vectors everywhere!</a>
<ul>
<li class="chapter" data-level="2.1" data-path="vectors.html"><a href="vectors.html#variables"><i class="fa fa-check"></i><b>2.1</b> Variables as boxes</a></li>
<li class="chapter" data-level="2.2" data-path="vectors.html"><a href="vectors.html#assignment-statement"><i class="fa fa-check"></i><b>2.2</b> Assignment statement in detail</a></li>
<li class="chapter" data-level="2.3" data-path="vectors.html"><a href="vectors.html#vectors-scalars"><i class="fa fa-check"></i><b>2.3</b> Vectors and singluar values (scalars, which are also vectors)</a></li>
<li class="chapter" data-level="2.4" data-path="vectors.html"><a href="vectors.html#vector-index"><i class="fa fa-check"></i><b>2.4</b> Vector indexes (subsetting)</a></li>
<li class="chapter" data-level="2.5" data-path="vectors.html"><a href="vectors.html#names"><i class="fa fa-check"></i><b>2.5</b> Names as an Index</a></li>
<li class="chapter" data-level="2.6" data-path="vectors.html"><a href="vectors.html#vector-index-slicing"><i class="fa fa-check"></i><b>2.6</b> Slicing</a></li>
<li class="chapter" data-level="2.7" data-path="vectors.html"><a href="vectors.html#colon-sequence"><i class="fa fa-check"></i><b>2.7</b> Colon Operator and Sequence Generation</a></li>
<li class="chapter" data-level="2.8" data-path="vectors.html"><a href="vectors.html#working-with-two-vectors-of-equal-length"><i class="fa fa-check"></i><b>2.8</b> Working with two vectors of <em>equal</em> length</a></li>
<li class="chapter" data-level="2.9" data-path="vectors.html"><a href="vectors.html#different-length-vectors"><i class="fa fa-check"></i><b>2.9</b> Working with two vectors of <em>different</em> length</a></li>
<li class="chapter" data-level="2.10" data-path="vectors.html"><a href="vectors.html#applying-functions-to-a-vector"><i class="fa fa-check"></i><b>2.10</b> Applying functions to a vector</a></li>
<li class="chapter" data-level="2.11" data-path="vectors.html"><a href="vectors.html#wrap-up"><i class="fa fa-check"></i><b>2.11</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>3</b> Tables and Tibbles (and Tribbles)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tables.html"><a href="tables.html#primary-types"><i class="fa fa-check"></i><b>3.1</b> Primary data types</a></li>
<li class="chapter" data-level="3.2" data-path="tables.html"><a href="tables.html#vectors-are-homogeneous"><i class="fa fa-check"></i><b>3.2</b> All vector values must be of the same type</a></li>
<li class="chapter" data-level="3.3" data-path="tables.html"><a href="tables.html#lists"><i class="fa fa-check"></i><b>3.3</b> Lists</a></li>
<li class="chapter" data-level="3.4" data-path="tables.html"><a href="tables.html#subsetting"><i class="fa fa-check"></i><b>3.4</b> Subsetting, a fuller version</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="tables.html"><a href="tables.html#subsetting-for-atomics-vectors"><i class="fa fa-check"></i><b>3.4.1</b> Subsetting for (atomics) vectors</a></li>
<li class="chapter" data-level="3.4.2" data-path="tables.html"><a href="tables.html#subsetting-for-lists"><i class="fa fa-check"></i><b>3.4.2</b> Subsetting for lists</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="tables.html"><a href="tables.html#dollar-subsetting"><i class="fa fa-check"></i><b>3.5</b> Yet another subsetting via $</a></li>
<li class="chapter" data-level="3.6" data-path="tables.html"><a href="tables.html#data.frame"><i class="fa fa-check"></i><b>3.6</b> Tables, a.k.a. data frames</a></li>
<li class="chapter" data-level="3.7" data-path="tables.html"><a href="tables.html#table-subsetting"><i class="fa fa-check"></i><b>3.7</b> Subsetting tables</a></li>
<li class="chapter" data-level="3.8" data-path="tables.html"><a href="tables.html#library"><i class="fa fa-check"></i><b>3.8</b> Using libraries</a></li>
<li class="chapter" data-level="3.9" data-path="tables.html"><a href="tables.html#tibble"><i class="fa fa-check"></i><b>3.9</b> Tibble, a better data.frame</a></li>
<li class="chapter" data-level="3.10" data-path="tables.html"><a href="tables.html#tribble"><i class="fa fa-check"></i><b>3.10</b> Tribble, table from text</a></li>
<li class="chapter" data-level="3.11" data-path="tables.html"><a href="tables.html#data"><i class="fa fa-check"></i><b>3.11</b> Reading example tables</a></li>
<li class="chapter" data-level="3.12" data-path="tables.html"><a href="tables.html#readr"><i class="fa fa-check"></i><b>3.12</b> Reading csv files</a></li>
<li class="chapter" data-level="3.13" data-path="tables.html"><a href="tables.html#readxl"><i class="fa fa-check"></i><b>3.13</b> Reading Excel files</a></li>
<li class="chapter" data-level="3.14" data-path="tables.html"><a href="tables.html#reading-files-from-other-programs"><i class="fa fa-check"></i><b>3.14</b> Reading files from other programs</a></li>
<li class="chapter" data-level="3.15" data-path="tables.html"><a href="tables.html#wrap-up-1"><i class="fa fa-check"></i><b>3.15</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>4</b> Functions! Functions everywhere!</a>
<ul>
<li class="chapter" data-level="4.1" data-path="functions.html"><a href="functions.html#functions-1"><i class="fa fa-check"></i><b>4.1</b> Functions</a></li>
<li class="chapter" data-level="4.2" data-path="functions.html"><a href="functions.html#writing-a-function"><i class="fa fa-check"></i><b>4.2</b> Writing a function</a></li>
<li class="chapter" data-level="4.3" data-path="functions.html"><a href="functions.html#scopes-global-versus-local-variables"><i class="fa fa-check"></i><b>4.3</b> Scopes: Global versus Local variables</a></li>
<li class="chapter" data-level="4.4" data-path="functions.html"><a href="functions.html#function-with-two-parameters"><i class="fa fa-check"></i><b>4.4</b> Function with two parameters</a></li>
<li class="chapter" data-level="4.5" data-path="functions.html"><a href="functions.html#table-as-a-parameter"><i class="fa fa-check"></i><b>4.5</b> Table as a parameter</a></li>
<li class="chapter" data-level="4.6" data-path="functions.html"><a href="functions.html#named-versus-positional-arguments"><i class="fa fa-check"></i><b>4.6</b> Named versus positional arguments</a></li>
<li class="chapter" data-level="4.7" data-path="functions.html"><a href="functions.html#default-values"><i class="fa fa-check"></i><b>4.7</b> Default values</a></li>
<li class="chapter" data-level="4.8" data-path="functions.html"><a href="functions.html#nested-calls"><i class="fa fa-check"></i><b>4.8</b> Nested calls</a></li>
<li class="chapter" data-level="4.9" data-path="functions.html"><a href="functions.html#pipe"><i class="fa fa-check"></i><b>4.9</b> Piping</a></li>
<li class="chapter" data-level="4.10" data-path="functions.html"><a href="functions.html#function-is-just-a-code-stored-in-a-variable"><i class="fa fa-check"></i><b>4.10</b> Function is just a code stored in a variable</a></li>
<li class="chapter" data-level="4.11" data-path="functions.html"><a href="functions.html#functions-functions-everywhere"><i class="fa fa-check"></i><b>4.11</b> Functions! Functions everywhere!</a></li>
<li class="chapter" data-level="4.12" data-path="functions.html"><a href="functions.html#using-or-not-using-explicit-return-statement"><i class="fa fa-check"></i><b>4.12</b> Using (or not using) explicit return statement</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>5</b> Grammar of Graphics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ggplot2.html"><a href="ggplot2.html#tidydata"><i class="fa fa-check"></i><b>5.1</b> Tidy data</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-1"><i class="fa fa-check"></i><b>5.2</b> ggplot2</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot2.html"><a href="ggplot2.html#auto-efficiency-continuous-x-axis"><i class="fa fa-check"></i><b>5.3</b> Auto efficiency: continuous x-axis</a></li>
<li class="chapter" data-level="5.4" data-path="ggplot2.html"><a href="ggplot2.html#auto-efficiency-discrete-x-axis"><i class="fa fa-check"></i><b>5.4</b> Auto efficiency: discrete x-axis</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot2.html"><a href="ggplot2.html#mammals-sleep-single-variable"><i class="fa fa-check"></i><b>5.5</b> Mammals sleep: single variable</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot2.html"><a href="ggplot2.html#mapping-for-all-visuals-versus-just-one-visual"><i class="fa fa-check"></i><b>5.6</b> Mapping for all visuals versus just one visual</a></li>
<li class="chapter" data-level="5.7" data-path="ggplot2.html"><a href="ggplot2.html#mapping-on-variables-versus-constants"><i class="fa fa-check"></i><b>5.7</b> Mapping on variables versus constants</a></li>
<li class="chapter" data-level="5.8" data-path="ggplot2.html"><a href="ggplot2.html#themes"><i class="fa fa-check"></i><b>5.8</b> Themes</a></li>
<li class="chapter" data-level="5.9" data-path="ggplot2.html"><a href="ggplot2.html#you-aint-seen-nothing-yet"><i class="fa fa-check"></i><b>5.9</b> You ain’t seen nothing yet</a></li>
<li class="chapter" data-level="5.10" data-path="ggplot2.html"><a href="ggplot2.html#further-reading"><i class="fa fa-check"></i><b>5.10</b> Further reading</a></li>
<li class="chapter" data-level="5.11" data-path="ggplot2.html"><a href="ggplot2.html#extending-ggplot2"><i class="fa fa-check"></i><b>5.11</b> Extending ggplot2</a></li>
<li class="chapter" data-level="5.12" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-cannot-do-everything"><i class="fa fa-check"></i><b>5.12</b> ggplot2 cannot do everything</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>6</b> Tidyverse: dplyr</a>
<ul>
<li class="chapter" data-level="6.1" data-path="dplyr.html"><a href="dplyr.html#tidyverse-philosophy"><i class="fa fa-check"></i><b>6.1</b> Tidyverse philosophy</a></li>
<li class="chapter" data-level="6.2" data-path="dplyr.html"><a href="dplyr.html#select"><i class="fa fa-check"></i><b>6.2</b> <code>select()</code> columns by name</a></li>
<li class="chapter" data-level="6.3" data-path="dplyr.html"><a href="dplyr.html#conditions"><i class="fa fa-check"></i><b>6.3</b> Conditions</a></li>
<li class="chapter" data-level="6.4" data-path="dplyr.html"><a href="dplyr.html#logical-indexing"><i class="fa fa-check"></i><b>6.4</b> Logical indexing</a></li>
<li class="chapter" data-level="6.5" data-path="dplyr.html"><a href="dplyr.html#filter-rows-by-values"><i class="fa fa-check"></i><b>6.5</b> <code>filter()</code> rows by values</a></li>
<li class="chapter" data-level="6.6" data-path="dplyr.html"><a href="dplyr.html#arrange-rows-in-a-particular-order"><i class="fa fa-check"></i><b>6.6</b> <code>arrange()</code> rows in a particular order</a></li>
<li class="chapter" data-level="6.7" data-path="dplyr.html"><a href="dplyr.html#mutate"><i class="fa fa-check"></i><b>6.7</b> <code>mutate()</code> columns</a></li>
<li class="chapter" data-level="6.8" data-path="dplyr.html"><a href="dplyr.html#summarize"><i class="fa fa-check"></i><b>6.8</b> <code>summarize()</code> table by <code>groups</code></a></li>
<li class="chapter" data-level="6.9" data-path="dplyr.html"><a href="dplyr.html#putting-it-all-together"><i class="fa fa-check"></i><b>6.9</b> Putting it all together</a></li>
<li class="chapter" data-level="6.10" data-path="dplyr.html"><a href="dplyr.html#should-i-use-tidyverse"><i class="fa fa-check"></i><b>6.10</b> Should I use Tidyverse?</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="seminar07.html"><a href="seminar07.html"><i class="fa fa-check"></i><b>7</b> Factors and Joins</a>
<ul>
<li class="chapter" data-level="7.1" data-path="seminar07.html"><a href="seminar07.html#how-to-write-code"><i class="fa fa-check"></i><b>7.1</b> How to write code</a></li>
<li class="chapter" data-level="7.2" data-path="seminar07.html"><a href="seminar07.html#implementing-a-typical-analysis"><i class="fa fa-check"></i><b>7.2</b> Implementing a typical analysis</a></li>
<li class="chapter" data-level="7.3" data-path="seminar07.html"><a href="seminar07.html#factors"><i class="fa fa-check"></i><b>7.3</b> Factors</a></li>
<li class="chapter" data-level="7.4" data-path="seminar07.html"><a href="seminar07.html#forcats"><i class="fa fa-check"></i><b>7.4</b> Forcats</a></li>
<li class="chapter" data-level="7.5" data-path="seminar07.html"><a href="seminar07.html#plotting-group-averages"><i class="fa fa-check"></i><b>7.5</b> Plotting group averages</a></li>
<li class="chapter" data-level="7.6" data-path="seminar07.html"><a href="seminar07.html#plotting-our-confidence-in-group-averages"><i class="fa fa-check"></i><b>7.6</b> Plotting our confidence in group averages</a></li>
<li class="chapter" data-level="7.7" data-path="seminar07.html"><a href="seminar07.html#looking-at-similarity"><i class="fa fa-check"></i><b>7.7</b> Looking at similarity</a></li>
<li class="chapter" data-level="7.8" data-path="seminar07.html"><a href="seminar07.html#joining-tables"><i class="fa fa-check"></i><b>7.8</b> Joining tables</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="seminar08.html"><a href="seminar08.html"><i class="fa fa-check"></i><b>8</b> Glueing and sprintfing</a>
<ul>
<li class="chapter" data-level="8.1" data-path="seminar08.html"><a href="seminar08.html#comparing-effect-between-two-studies"><i class="fa fa-check"></i><b>8.1</b> Comparing effect between two studies</a></li>
<li class="chapter" data-level="8.2" data-path="seminar08.html"><a href="seminar08.html#glue"><i class="fa fa-check"></i><b>8.2</b> Gluing in correlation strength information.</a></li>
<li class="chapter" data-level="8.3" data-path="seminar08.html"><a href="seminar08.html#sprintf"><i class="fa fa-check"></i><b>8.3</b> sprintf</a></li>
<li class="chapter" data-level="8.4" data-path="seminar08.html"><a href="seminar08.html#wrap-up-2"><i class="fa fa-check"></i><b>8.4</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="seminar09.html"><a href="seminar09.html"><i class="fa fa-check"></i><b>9</b> Tidyng your data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="seminar09.html"><a href="seminar09.html#pivoting-between-long-and-wide-format"><i class="fa fa-check"></i><b>9.1</b> Pivoting between long and wide format</a></li>
<li class="chapter" data-level="9.2" data-path="seminar09.html"><a href="seminar09.html#practice-pivoting-longer"><i class="fa fa-check"></i><b>9.2</b> Practice pivoting longer</a></li>
<li class="chapter" data-level="9.3" data-path="seminar09.html"><a href="seminar09.html#practice-pivoting-wider"><i class="fa fa-check"></i><b>9.3</b> Practice pivoting wider</a></li>
<li class="chapter" data-level="9.4" data-path="seminar09.html"><a href="seminar09.html#extracting-information-from-a-string"><i class="fa fa-check"></i><b>9.4</b> Extracting information from a string</a></li>
<li class="chapter" data-level="9.5" data-path="seminar09.html"><a href="seminar09.html#separate"><i class="fa fa-check"></i><b>9.5</b> Separate</a></li>
<li class="chapter" data-level="9.6" data-path="seminar09.html"><a href="seminar09.html#missing-data"><i class="fa fa-check"></i><b>9.6</b> Missing data</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="seminar10.html"><a href="seminar10.html"><i class="fa fa-check"></i><b>10</b> Repeating a computation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="seminar10.html"><a href="seminar10.html#rep"><i class="fa fa-check"></i><b>10.1</b> <code>rep()</code></a></li>
<li class="chapter" data-level="10.2" data-path="seminar10.html"><a href="seminar10.html#repeating-combinations"><i class="fa fa-check"></i><b>10.2</b> Repeating combinations</a></li>
<li class="chapter" data-level="10.3" data-path="seminar10.html"><a href="seminar10.html#list"><i class="fa fa-check"></i><b>10.3</b> Lists</a></li>
<li class="chapter" data-level="10.4" data-path="seminar10.html"><a href="seminar10.html#forloop"><i class="fa fa-check"></i><b>10.4</b> For loop</a></li>
<li class="chapter" data-level="10.5" data-path="seminar10.html"><a href="seminar10.html#using-for-loop-to-load-and-join-multiple-data-files"><i class="fa fa-check"></i><b>10.5</b> Using for loop to load and join multiple data files</a></li>
<li class="chapter" data-level="10.6" data-path="seminar10.html"><a href="seminar10.html#apply"><i class="fa fa-check"></i><b>10.6</b> Apply</a></li>
<li class="chapter" data-level="10.7" data-path="seminar10.html"><a href="seminar10.html#purrr"><i class="fa fa-check"></i><b>10.7</b> Purrr</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="seminar11.html"><a href="seminar11.html"><i class="fa fa-check"></i><b>11</b> Statistical modeling</a>
<ul>
<li class="chapter" data-level="11.1" data-path="seminar11.html"><a href="seminar11.html#formula-notation"><i class="fa fa-check"></i><b>11.1</b> Formula notation</a></li>
<li class="chapter" data-level="11.2" data-path="seminar11.html"><a href="seminar11.html#correlation"><i class="fa fa-check"></i><b>11.2</b> Correlation</a></li>
<li class="chapter" data-level="11.3" data-path="seminar11.html"><a href="seminar11.html#pairwise-comparisons"><i class="fa fa-check"></i><b>11.3</b> Pairwise comparisons</a></li>
<li class="chapter" data-level="11.4" data-path="seminar11.html"><a href="seminar11.html#anova"><i class="fa fa-check"></i><b>11.4</b> ANOVA</a></li>
<li class="chapter" data-level="11.5" data-path="seminar11.html"><a href="seminar11.html#GLMM"><i class="fa fa-check"></i><b>11.5</b> (Generalized) Linear Models</a></li>
<li class="chapter" data-level="11.6" data-path="seminar11.html"><a href="seminar11.html#generalized-linear-mixed-models"><i class="fa fa-check"></i><b>11.6</b> (Generalized) Linear Mixed Models</a></li>
<li class="chapter" data-level="11.7" data-path="seminar11.html"><a href="seminar11.html#practice"><i class="fa fa-check"></i><b>11.7</b> Practice</a>
<ul>
<li class="chapter" data-level="" data-path="seminar11.html"><a href="seminar11.html#read-files-and-preprocess-data"><i class="fa fa-check"></i>Read files and preprocess data</a></li>
<li class="chapter" data-level="" data-path="seminar11.html"><a href="seminar11.html#accuracy"><i class="fa fa-check"></i>Accuracy</a></li>
<li class="chapter" data-level="" data-path="seminar11.html"><a href="seminar11.html#response-times"><i class="fa fa-check"></i>Response times</a></li>
<li class="chapter" data-level="" data-path="seminar11.html"><a href="seminar11.html#computing-the-score"><i class="fa fa-check"></i>Computing the score</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="seminar12.html"><a href="seminar12.html"><i class="fa fa-check"></i><b>12</b> Practice</a>
<ul>
<li class="chapter" data-level="12.1" data-path="seminar12.html"><a href="seminar12.html#bad-names-to-good-names"><i class="fa fa-check"></i><b>12.1</b> Bad names to good names</a></li>
<li class="chapter" data-level="12.2" data-path="seminar12.html"><a href="seminar12.html#participant-id"><i class="fa fa-check"></i><b>12.2</b> Participant ID</a></li>
<li class="chapter" data-level="12.3" data-path="seminar12.html"><a href="seminar12.html#factors-1"><i class="fa fa-check"></i><b>12.3</b> Factors</a></li>
<li class="chapter" data-level="12.4" data-path="seminar12.html"><a href="seminar12.html#response-times-1"><i class="fa fa-check"></i><b>12.4</b> Response times</a></li>
<li class="chapter" data-level="12.5" data-path="seminar12.html"><a href="seminar12.html#accuracy-1"><i class="fa fa-check"></i><b>12.5</b> Accuracy</a></li>
<li class="chapter" data-level="12.6" data-path="seminar12.html"><a href="seminar12.html#physiological-signal"><i class="fa fa-check"></i><b>12.6</b> Physiological signal</a></li>
<li class="chapter" data-level="12.7" data-path="seminar12.html"><a href="seminar12.html#wrap-up-3"><i class="fa fa-check"></i><b>12.7</b> Wrap up</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://alexander-pastukhov.github.io/">Alexander (Sasha) Pastukhov</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data analysis using R for Psychology and Social Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="seminar09" class="section level1" number="9">
<h1><span class="header-section-number">Seminar 9</span> Tidyng your data</h1>
<p>It is fun to work with tidy complete data. Unfortunately, more often than not you will need to preprocess and tidy it up before you can process it. Tidyverse has <a href="https://tidyr.tidyverse.org/">tidyr</a> package that helps you with some of the problems. Grab the <a href="notebooks/Seminar%2009%20-%20tidyr.Rmd">exercise notebook</a> and let’s get started.</p>
<div id="pivoting-between-long-and-wide-format" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Pivoting between long and wide format</h2>
<p>Recall the idea of <a href="ggplot2.html#tidydata">tidy data</a>:</p>
<ul>
<li>variables are in columns,</li>
<li>observations are in rows,</li>
<li>values are in cells.</li>
</ul>
<p>And, also recall, that quite often data is stored in a wide format that is easier for humans read.</p>
<table>
<thead>
<tr class="header">
<th align="center">Participant</th>
<th align="center">Face</th>
<th align="center">Symmetry</th>
<th align="center">Attractiveness</th>
<th align="center">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">M-1</td>
<td align="center">6</td>
<td align="center">4</td>
<td align="center">3</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">M-2</td>
<td align="center">4</td>
<td align="center">7</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">M-1</td>
<td align="center">5</td>
<td align="center">2</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">M-2</td>
<td align="center">3</td>
<td align="center">7</td>
<td align="center">2</td>
</tr>
</tbody>
</table>
<p>Here, <code>Symmetry</code>, <code>Attractiveness</code>, <code>Trustworthiness</code> are different face properties participants responded on, whereas values are <code>Response</code> they gave. You can work with a table like that but it is often more convenient to have instead a column <code>Property</code> that will code which face property participants respond on and a column <code>Response</code> to hold values. Then, you can easily split or group your data by property while performing the same analysis on all of them.</p>
<p>The function to do this is <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a>. It takes a table, which you can pipe to the function and vector of column names that need to be transformed. All <em>column names</em> go to one new column and all the <em>values</em> go to another new column. Defaults names of these two columns are, respectively, <code>"name"</code> and <code>"value"</code> but you can specify something more suitable via, respectively, <code>names_to</code> and <code>values_to</code> parameters. Another</p>
<p>There are many more bells-and-whistles (name and value transformations, removing a prefix via regular expressions, etc.), so recommend looking at the manual and a <a href="https://tidyr.tidyverse.org/articles/pivot.html">vignette</a>. However, in most cases these for parameters will be all you need, so let us see <code>pivot_longer</code> in action.</p>
<p>I assume that table presented above is in <code>widish_df</code> table. The columns that we want to transform are <code>Symmetry</code>, <code>Attractiveness</code>, <code>Trustworthiness</code>. Thus, the simplest call with all defaults is</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="seminar09.html#cb340-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(widish_df, </span>
<span id="cb340-2"><a href="seminar09.html#cb340-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">cols=</span><span class="fu">c</span>(<span class="st">&quot;Symmetry&quot;</span>, <span class="st">&quot;Attractiveness&quot;</span>, <span class="st">&quot;Trustworthiness&quot;</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="left">name</th>
<th align="right">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">Symmetry</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">Attractiveness</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">Trustworthiness</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="left">Symmetry</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="left">Attractiveness</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="left">Trustworthiness</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="left">Symmetry</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="left">Attractiveness</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="left">Trustworthiness</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="left">Symmetry</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="left">Attractiveness</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="left">Trustworthiness</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>When you compare the two tables, you will see that original three columns × four rows are now stretched into twelve rows and name-value pairs are consistent across the two tables<a href="#fn47" class="footnote-ref" id="fnref47"><sup>47</sup></a>. As noted above, you can use better names for new columns (I use <a href="https://stat.ethz.ch/R-manual/R-devel/library/utils/html/head.html">head()</a> function to show only first 4 rows to save space, because data is the same):</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="seminar09.html#cb341-1" aria-hidden="true" tabindex="-1"></a>longish_df <span class="ot">&lt;-</span> </span>
<span id="cb341-2"><a href="seminar09.html#cb341-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(widish_df, </span>
<span id="cb341-3"><a href="seminar09.html#cb341-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">cols=</span><span class="fu">c</span>(<span class="st">&quot;Symmetry&quot;</span>, <span class="st">&quot;Attractiveness&quot;</span>, <span class="st">&quot;Trustworthiness&quot;</span>),</span>
<span id="cb341-4"><a href="seminar09.html#cb341-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">names_to=</span><span class="st">&quot;Property&quot;</span>,</span>
<span id="cb341-5"><a href="seminar09.html#cb341-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">values_to=</span><span class="st">&quot;Response&quot;</span>)</span>
<span id="cb341-6"><a href="seminar09.html#cb341-6" aria-hidden="true" tabindex="-1"></a>                      </span>
<span id="cb341-7"><a href="seminar09.html#cb341-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(longish_df, <span class="dv">4</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="left">Property</th>
<th align="right">Response</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">Symmetry</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">Attractiveness</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">Trustworthiness</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="left">Symmetry</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
<p>You also can go from long to wide representation via <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider()</a> function. The logic is reverse, you need to specify which columns <em>identify</em> different rows that belong together (that one is optional), which columns contain column names and which contain their values. For our example table the names of the columns are in the column <code>Property</code> and values are in <code>Response</code>. But what about columns that identify the rows that belong together? In our case, these are <code>Participant</code> and <code>Face</code>, so all rows from a <em>long</em> table that have same combination of <code>Participant</code> and <code>Face</code> values should be merged together into a single row. If you do not explicitly specify <code>id_cols</code>, then by default, <em>all other remaining columns</em> are used to identify which rows belong together. This is irrelevant in this toy example, as <code>Participant</code> and <code>Face</code> is all we have left anyhow but I will show you how things can get confusing and how to overcome this below.</p>
<p>So, let us undo our previous wide-to-long transformation<a href="#fn48" class="footnote-ref" id="fnref48"><sup>48</sup></a></p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="seminar09.html#cb342-1" aria-hidden="true" tabindex="-1"></a>longish_df <span class="sc">%&gt;%</span></span>
<span id="cb342-2"><a href="seminar09.html#cb342-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Property&quot;</span>, <span class="at">values_from=</span><span class="st">&quot;Response&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>And our original wide table is back!</p>
<p>Now let us take a look at the importance of <code>id_cols</code>. Imagine that we have <em>another</em> column, say, response times. So, our long table will look like this</p>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="left">Property</th>
<th align="right">Response</th>
<th align="right">RT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">Symmetry</td>
<td align="right">6</td>
<td align="right">1.64</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">Attractiveness</td>
<td align="right">4</td>
<td align="right">1.58</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">Trustworthiness</td>
<td align="right">3</td>
<td align="right">1.98</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="left">Symmetry</td>
<td align="right">4</td>
<td align="right">0.36</td>
</tr>
</tbody>
</table>
<p>Now, if we do not specify which columns identify rows that belong together, <code>RT</code> will be used as well. But, because it is different for every response, each row in the original table will be unique. Now we have a weird looking table</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="seminar09.html#cb343-1" aria-hidden="true" tabindex="-1"></a>longish_df_rt <span class="sc">%&gt;%</span></span>
<span id="cb343-2"><a href="seminar09.html#cb343-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Property&quot;</span>, <span class="at">values_from=</span><span class="st">&quot;Response&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="seminar09.html#cb344-1" aria-hidden="true" tabindex="-1"></a>longish_df_rt <span class="sc">%&gt;%</span></span>
<span id="cb344-2"><a href="seminar09.html#cb344-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Property&quot;</span>, <span class="at">values_from=</span><span class="st">&quot;Response&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb344-3"><a href="seminar09.html#cb344-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb344-4"><a href="seminar09.html#cb344-4" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">RT</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="right">1.64</td>
<td align="right">6</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="right">1.58</td>
<td align="right">NA</td>
<td align="right">4</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="right">1.98</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="right">0.36</td>
<td align="right">4</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>To remedy that, we need to specify id columns explicitly, so that <code>pivot_wider()</code> can ignore and drop the rest:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="seminar09.html#cb345-1" aria-hidden="true" tabindex="-1"></a>longish_df_rt <span class="sc">%&gt;%</span></span>
<span id="cb345-2"><a href="seminar09.html#cb345-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(<span class="st">&quot;Participant&quot;</span>, <span class="st">&quot;Face&quot;</span>), <span class="at">names_from =</span> <span class="st">&quot;Property&quot;</span>, <span class="at">values_from=</span><span class="st">&quot;Response&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="seminar09.html#cb346-1" aria-hidden="true" tabindex="-1"></a>longish_df_rt <span class="sc">%&gt;%</span></span>
<span id="cb346-2"><a href="seminar09.html#cb346-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(<span class="st">&quot;Participant&quot;</span>, <span class="st">&quot;Face&quot;</span>), <span class="at">names_from =</span> <span class="st">&quot;Property&quot;</span>, <span class="at">values_from=</span><span class="st">&quot;Response&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb346-3"><a href="seminar09.html#cb346-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb346-4"><a href="seminar09.html#cb346-4" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>As <code>pivot_longer</code>, <code>pivot_wider</code> has plenty of parameters to fine-tune pivoting, so you should check them to know what it can do.</p>
</div>
<div id="practice-pivoting-longer" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Practice pivoting longer</h2>
<p>Let us put this new knowledge to practice, using <a href="data/GP.csv">GP.csv</a> file. These is a questionnaire on gaming habits, which was conducted prior to an experiment to check whether two groups of participants assigned to <em>Game</em> and <em>Experiment</em> conditions have similar gaming habits. We would like to visually inspect responses to individual items in a questionnaire appear for different conditions, as this will tell us whether we should expect a difference. Split the computations below into two pipelines. One that loads and pre-processes the data (steps 1-3). Another one that produces a summary and stores it into a different table (step 4). Advice, implement it one step at a time, checking the table and making sure that you get expected results before piping it and adding the next operation.</p>
<ol style="list-style-type: decimal">
<li>Read the file, make sure you specify column types.</li>
<li>Convert <code>Condition</code> column to a factor with <code>1</code> corresponding to <code>"Game"</code> and <code>2</code> to <code>"Exp"</code>.</li>
<li>Pivot all <code>GP..</code> columns. You should get a table with five columns: <code>Respondent</code>, <code>Condition</code>, <code>Gender</code>, <code>name</code> (or a column name that you specified), and <code>value</code> (or a column name that you specified). Hint, you can use slicing <code>:</code> to specify the range of columns or <a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a> function to specify a common prefix. Try both approaches.</li>
<li>Group data by condition and GP item and compute median and <a href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/mad.html">median absolute deviation</a> of responses. These are robust versions of mean and standard deviation, better suitable for data with potential outliers.</li>
</ol>
<p>You first table, in long format, should look like this (I show only first four rows)</p>
<table>
<thead>
<tr class="header">
<th align="left">Respondent</th>
<th align="left">Condition</th>
<th align="right">Gender</th>
<th align="left">Item</th>
<th align="right">Response</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SBS1992w</td>
<td align="left">Game</td>
<td align="right">1</td>
<td align="left">GP01_01</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">SBS1992w</td>
<td align="left">Game</td>
<td align="right">1</td>
<td align="left">GP02_01</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">SBS1992w</td>
<td align="left">Game</td>
<td align="right">1</td>
<td align="left">GP02_02</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">SBS1992w</td>
<td align="left">Game</td>
<td align="right">1</td>
<td align="left">GP02_03</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<p>And your second table, with aggregated results, show be like this</p>
<table>
<thead>
<tr class="header">
<th align="left">Condition</th>
<th align="left">Item</th>
<th align="right">MedianResponse</th>
<th align="right">ResponseMAD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Game</td>
<td align="left">GP01_01</td>
<td align="right">1.0</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Game</td>
<td align="left">GP02_01</td>
<td align="right">1.0</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">Game</td>
<td align="left">GP02_02</td>
<td align="right">1.0</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Game</td>
<td align="left">GP02_03</td>
<td align="right">3.5</td>
<td align="right">3.7065</td>
</tr>
</tbody>
</table>
<p>Now you have a table that has median and MAD values for each combination and item. Plot them to compare them visually. Use median responses for y-value of points and median±MAD for error bars. Use facets and color to make it easier to identify the items and conditions. My take on the plot is below, do you think we should expect to find difference between the conditions?
<img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-197-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="infobox practice">
<p>Do exercise 1.</p>
</div>
<p>Perform similar analysis but do not group data and summarize the data. Instead, use box plots to show the variability. Which visualization do you prefer?</p>
<p><img src="data-analysis-using-r-for-psychology_files/figure-html/unnamed-chunk-198-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="infobox practice">
<p>Do exercise 2.</p>
</div>
</div>
<div id="practice-pivoting-wider" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Practice pivoting wider</h2>
<p>Let us take <a href="data/bands-adaptation.csv">adaptation</a> data and turn it onto a wide format that is easier for humans to read. In the original form, the table is a long format with a row for each pair of prime and probe stimuli.</p>
<table>
<thead>
<tr class="header">
<th align="left">Participant</th>
<th align="left">Prime</th>
<th align="left">Probe</th>
<th align="right">Nsame</th>
<th align="right">Ntotal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ma2</td>
<td align="left">Sphere</td>
<td align="left">Sphere</td>
<td align="right">22</td>
<td align="right">119</td>
</tr>
<tr class="even">
<td align="left">ma2</td>
<td align="left">Sphere</td>
<td align="left">Quadro</td>
<td align="right">23</td>
<td align="right">118</td>
</tr>
<tr class="odd">
<td align="left">ma2</td>
<td align="left">Sphere</td>
<td align="left">Dual</td>
<td align="right">15</td>
<td align="right">120</td>
</tr>
<tr class="even">
<td align="left">ma2</td>
<td align="left">Sphere</td>
<td align="left">Single</td>
<td align="right">31</td>
<td align="right">115</td>
</tr>
</tbody>
</table>
<p>Let us turn it into a wider table, so that a single row corresponds to a single prime and four new column contain proportion of same responses for individual probes. The table will look like this (use <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Round.html">round()</a> function to reduce the number of digits):</p>
<table>
<thead>
<tr class="header">
<th align="left">Participant</th>
<th align="left">Prime</th>
<th align="right">Sphere</th>
<th align="right">Quadro</th>
<th align="right">Dual</th>
<th align="right">Single</th>
<th align="right">Average</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ma2</td>
<td align="left">Sphere</td>
<td align="right">0.18</td>
<td align="right">0.19</td>
<td align="right">0.12</td>
<td align="right">0.27</td>
<td align="right">0.1900</td>
</tr>
<tr class="even">
<td align="left">ma2</td>
<td align="left">Quadro</td>
<td align="right">0.21</td>
<td align="right">0.22</td>
<td align="right">0.14</td>
<td align="right">0.34</td>
<td align="right">0.2275</td>
</tr>
<tr class="odd">
<td align="left">ma2</td>
<td align="left">Dual</td>
<td align="right">0.25</td>
<td align="right">0.30</td>
<td align="right">0.27</td>
<td align="right">0.48</td>
<td align="right">0.3250</td>
</tr>
<tr class="even">
<td align="left">ma2</td>
<td align="left">Single</td>
<td align="right">0.34</td>
<td align="right">0.30</td>
<td align="right">0.48</td>
<td align="right">0.39</td>
<td align="right">0.3775</td>
</tr>
</tbody>
</table>
<p>The overall procedure is fairly straightforward:</p>
<ol style="list-style-type: decimal">
<li>Read the file (don’t forget to specify column types)</li>
<li>Computer <code>Psame</code> proportion of same responses given number of total responses.</li>
<li>Pivot the table wider, think about your id columns. Also try without specifying any and see what you get.</li>
<li>Compute an average stability across all probes and put it into a new <code>Average</code> column. You can do it “by hand” but, instead, use <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/colSums.html">rowSums()</a> to compute it. Here, use <code>.</code> to refer to the table inside the <code>mutate()</code> function and you will need to normalize it by the number of probes to get an average instead of the sum.</li>
<li>Pipe it to the output, using <a href="https://bookdown.org/yihui/rmarkdown-cookbook/kable.html">knitr::kable()</a>.</li>
</ol>
<div class="infobox practice">
<p>Do exercise 3.</p>
</div>
<p>Let us practice more and create group average summary as a square 5×4 table with a single row per <em>Prime</em> and four columns for <em>Probe</em> plus a column that says which prime the row corresponds to. As a value for each cell, we want to code <em>median ± MAD</em>. The table should look like this:</p>
<table>
<thead>
<tr class="header">
<th align="center">Prime</th>
<th align="center">Sphere</th>
<th align="center">Quadro</th>
<th align="center">Dual</th>
<th align="center">Single</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Sphere</td>
<td align="center">0.13 ± 0.06</td>
<td align="center">0.13 ± 0.04</td>
<td align="center">0.17 ± 0.1</td>
<td align="center">0.32 ± 0.08</td>
</tr>
<tr class="even">
<td align="center">Quadro</td>
<td align="center">0.19 ± 0.07</td>
<td align="center">0.12 ± 0.12</td>
<td align="center">0.21 ± 0.19</td>
<td align="center">0.38 ± 0.07</td>
</tr>
<tr class="odd">
<td align="center">Dual</td>
<td align="center">0.15 ± 0.15</td>
<td align="center">0.3 ± 0.14</td>
<td align="center">0.27 ± 0.15</td>
<td align="center">0.48 ± 0.16</td>
</tr>
<tr class="even">
<td align="center">Single</td>
<td align="center">0.34 ± 0.18</td>
<td align="center">0.3 ± 0.2</td>
<td align="center">0.48 ± 0.12</td>
<td align="center">0.51 ± 0.18</td>
</tr>
</tbody>
</table>
<p>You know everything you need, so think about how you would implement this as a <em>single</em> pipeline. Hints: to match my table you will definitely to convert <code>Prime</code> and <code>Probe</code> to factors to ensure consistent ordering (otherwise, they will be sorted alphabetically), you will need to use <a href="#gluing-in-correlation-strength-in">glue</a> in combination with <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Round.html">round()</a> to form the summary info or you can use <a href="seminar08.html#sprintf">sprintf</a>. And, of course, you will need to pivot the table wider.</p>
<div class="infobox practice">
<p>Do exercise 4.</p>
</div>
</div>
<div id="extracting-information-from-a-string" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> Extracting information from a string</h2>
<p>Quite often, a string value is a code to contains several different pieces of information. For example, in the toy table on face perception, we have been working with, <code>Face</code> column code gender of the face <code>"M"</code> (table is short but you can easily assume that faces of both genders were used) and the second is its index (<code>1</code> and <code>2</code>). When we worked with <a href="data/persistence.csv">persistence</a>, <code>Participant</code> column encoded year of birth and gender, whereas <code>Session</code> contained detailed information about year, month, day, hour, minutes, and seconds all merged together. There are several ways to extract this information, either via <a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a> function, discussed below, or via <a href="https://tidyr.tidyverse.org/reference/extract.html">extract()</a> function or using string processing library <a href="https://stringr.tidyverse.org/">stringr</a>.</p>
</div>
<div id="separate" class="section level2" number="9.5">
<h2><span class="header-section-number">9.5</span> Separate</h2>
<p>Use of <a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a> functions is generally straightforward: you pass the name of the column that you want to split, names of the columns it needs to be split into, a separator symbol or indexes of splitting positions. Examples using the face table should make it clear. Reminder, this is the original wide table and we want to separate <code>Face</code> into <code>FaceGender</code> and <code>FaceIndex</code>.</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="seminar09.html#cb347-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb347-2"><a href="seminar09.html#cb347-2" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>As there is a very convenient “dash” between the two, we can use it for a separator symbol:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="seminar09.html#cb348-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb348-2"><a href="seminar09.html#cb348-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">FaceGender</th>
<th align="left">FaceIndex</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M</td>
<td align="left">1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M</td>
<td align="left">2</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M</td>
<td align="left">1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M</td>
<td align="left">2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>Note that the original <code>Face</code> column is gone. We can keep it via <code>remove=FALSE</code> option</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="seminar09.html#cb349-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb349-2"><a href="seminar09.html#cb349-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="left">FaceGender</th>
<th align="left">FaceIndex</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">M</td>
<td align="left">1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="left">M</td>
<td align="left">2</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="left">M</td>
<td align="left">1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="left">M</td>
<td align="left">2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>We also do not need to extract <em>all</em> information. For example, we can extract only face gender or face index. To get only the gender, we only specify <em>one</em> <code>into</code> column and add <code>extra="drop"</code> parameter, telling <code>separate()</code> to drop any extra piece it obtained:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="seminar09.html#cb350-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb350-2"><a href="seminar09.html#cb350-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;Gender&quot;</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>, <span class="at">extra=</span><span class="st">&quot;drop&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="left">Gender</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">M</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="left">M</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="left">M</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="left">M</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>Alternatively, we can explicitly <em>ignore</em> pieces by using <code>NA</code> for their column name:</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="seminar09.html#cb351-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb351-2"><a href="seminar09.html#cb351-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;Gender&quot;</span>, <span class="cn">NA</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="seminar09.html#cb352-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb352-2"><a href="seminar09.html#cb352-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;Gender&quot;</span>, <span class="cn">NA</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb352-3"><a href="seminar09.html#cb352-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="left">Gender</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">M</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="left">M</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="left">M</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="left">M</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>What about keeping only the <em>second</em> piece in a <code>FaceIndex</code> column? We ignore the first one via <code>NA</code></p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="seminar09.html#cb353-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb353-2"><a href="seminar09.html#cb353-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">&quot;Index&quot;</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="seminar09.html#cb354-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb354-2"><a href="seminar09.html#cb354-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">&quot;Index&quot;</span>), <span class="at">sep=</span><span class="st">&quot;-&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb354-3"><a href="seminar09.html#cb354-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="left">Index</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="left">1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="left">2</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="left">1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="left">2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>Let’s practice. Use <code>separate()</code> to preprocess <a href="data/persistence.csv">persistence</a> data and create two new columns for hour and minutes from <code>Session</code> column. Do it in a single pipeline, starting with reading the file. You results should look like this, think about columns that are drop or keep (this is only first four rows, think of how you can limit your output the same way via <a href="https://stat.ethz.ch/R-manual/R-devel/library/utils/html/head.html">head()</a> function):</p>
<table>
<colgroup>
<col width="9%" />
<col width="4%" />
<col width="6%" />
<col width="4%" />
<col width="4%" />
<col width="8%" />
<col width="4%" />
<col width="8%" />
<col width="15%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Participant</th>
<th align="left">Hour</th>
<th align="left">Minutes</th>
<th align="right">Block</th>
<th align="right">Trial</th>
<th align="right">OnsetDelay</th>
<th align="left">Bias</th>
<th align="left">Prime</th>
<th align="left">Probe</th>
<th align="left">Response1</th>
<th align="left">Response2</th>
<th align="right">RT1</th>
<th align="right">RT2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AKM1995M</td>
<td align="left">14</td>
<td align="left">07</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0.5051354</td>
<td align="left">right</td>
<td align="left">stripes-4</td>
<td align="left">heavy poles sphere</td>
<td align="left">right</td>
<td align="left">right</td>
<td align="right">0.4606155</td>
<td align="right">0.3198615</td>
</tr>
<tr class="even">
<td align="left">AKM1995M</td>
<td align="left">14</td>
<td align="left">07</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0.6669318</td>
<td align="left">left</td>
<td align="left">stripes-2</td>
<td align="left">stripes-8</td>
<td align="left">right</td>
<td align="left">right</td>
<td align="right">0.2739671</td>
<td align="right">0.3598261</td>
</tr>
<tr class="odd">
<td align="left">AKM1995M</td>
<td align="left">14</td>
<td align="left">07</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0.6043307</td>
<td align="left">right</td>
<td align="left">stripes-2</td>
<td align="left">stripes-2</td>
<td align="left">right</td>
<td align="left">right</td>
<td align="right">0.4715643</td>
<td align="right">0.3277184</td>
</tr>
<tr class="even">
<td align="left">AKM1995M</td>
<td align="left">14</td>
<td align="left">07</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0.5574895</td>
<td align="left">right</td>
<td align="left">stripes-8</td>
<td align="left">stripes-4</td>
<td align="left">right</td>
<td align="left">right</td>
<td align="right">0.2636357</td>
<td align="right">0.3036911</td>
</tr>
</tbody>
</table>
<div class="infobox practice">
<p>Do exercise 5.</p>
</div>
<p>As noted above, if position of individual pieces is fixed, you can specify it explicitly. Let us make out toy table a bit more explicit</p>
<table>
<thead>
<tr class="header">
<th align="center">Participant</th>
<th align="center">Face</th>
<th align="center">Symmetry</th>
<th align="center">Attractiveness</th>
<th align="center">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">Female-01</td>
<td align="center">6</td>
<td align="center">4</td>
<td align="center">3</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">Female-02</td>
<td align="center">4</td>
<td align="center">7</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">Female-01</td>
<td align="center">5</td>
<td align="center">2</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">Female-02</td>
<td align="center">3</td>
<td align="center">7</td>
<td align="center">2</td>
</tr>
</tbody>
</table>
<p>For our toy faces table, the first piece is the gender and the last one is its index. Thus, we tell <code>separate()</code> starting position each pieces, starting with the <em>second</em> one:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="seminar09.html#cb355-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb355-2"><a href="seminar09.html#cb355-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="st">&quot;Dash&quot;</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>))</span></code></pre></div>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="seminar09.html#cb356-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb356-2"><a href="seminar09.html#cb356-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="st">&quot;Dash&quot;</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>), <span class="at">remove=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb356-3"><a href="seminar09.html#cb356-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<colgroup>
<col width="13%" />
<col width="11%" />
<col width="12%" />
<col width="5%" />
<col width="11%" />
<col width="10%" />
<col width="17%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="left">FaceGender</th>
<th align="left">Dash</th>
<th align="left">FaceIndex</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Female-01</td>
<td align="left">Female</td>
<td align="left">-</td>
<td align="left">01</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">Female-02</td>
<td align="left">Female</td>
<td align="left">-</td>
<td align="left">02</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">Female-01</td>
<td align="left">Female</td>
<td align="left">-</td>
<td align="left">01</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Female-02</td>
<td align="left">Female</td>
<td align="left">-</td>
<td align="left">02</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>Here, I’ve create <code>Dash</code> column for the separator but, of course, I could have omitted it via <code>NA</code> column name.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="seminar09.html#cb357-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb357-2"><a href="seminar09.html#cb357-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>))</span></code></pre></div>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="seminar09.html#cb358-1" aria-hidden="true" tabindex="-1"></a>widish_df <span class="sc">%&gt;%</span></span>
<span id="cb358-2"><a href="seminar09.html#cb358-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Face, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;FaceGender&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;FaceIndex&quot;</span>), <span class="at">sep=</span><span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb358-3"><a href="seminar09.html#cb358-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">FaceGender</th>
<th align="left">FaceIndex</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Female</td>
<td align="left">01</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">Female</td>
<td align="left">02</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">Female</td>
<td align="left">01</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Female</td>
<td align="left">02</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>Practice time! Using same <a href="data/persistence.csv">persistence</a> data extract birth year and gender of participants from <code>Participant</code> code (keep the code though!). Put a nice extra touch by converting year to a number and gender into a factor type. Here is how should look like:</p>
<table style="width:100%;">
<colgroup>
<col width="8%" />
<col width="6%" />
<col width="4%" />
<col width="13%" />
<col width="4%" />
<col width="4%" />
<col width="7%" />
<col width="4%" />
<col width="6%" />
<col width="12%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Participant</th>
<th align="right">BirthYear</th>
<th align="left">Gender</th>
<th align="left">Session</th>
<th align="right">Block</th>
<th align="right">Trial</th>
<th align="right">OnsetDelay</th>
<th align="left">Bias</th>
<th align="left">Prime</th>
<th align="left">Probe</th>
<th align="left">Response1</th>
<th align="left">Response2</th>
<th align="right">RT1</th>
<th align="right">RT2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AKM1995M</td>
<td align="right">1995</td>
<td align="left">Female</td>
<td align="left">2019-06-12-14-07-17</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0.5051354</td>
<td align="left">right</td>
<td align="left">stripes-4</td>
<td align="left">heavy poles sphere</td>
<td align="left">right</td>
<td align="left">right</td>
<td align="right">0.4606155</td>
<td align="right">0.3198615</td>
</tr>
<tr class="even">
<td align="left">AKM1995M</td>
<td align="right">1995</td>
<td align="left">Female</td>
<td align="left">2019-06-12-14-07-17</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0.6669318</td>
<td align="left">left</td>
<td align="left">stripes-2</td>
<td align="left">stripes-8</td>
<td align="left">right</td>
<td align="left">right</td>
<td align="right">0.2739671</td>
<td align="right">0.3598261</td>
</tr>
<tr class="odd">
<td align="left">AKM1995M</td>
<td align="right">1995</td>
<td align="left">Female</td>
<td align="left">2019-06-12-14-07-17</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0.6043307</td>
<td align="left">right</td>
<td align="left">stripes-2</td>
<td align="left">stripes-2</td>
<td align="left">right</td>
<td align="left">right</td>
<td align="right">0.4715643</td>
<td align="right">0.3277184</td>
</tr>
<tr class="even">
<td align="left">AKM1995M</td>
<td align="right">1995</td>
<td align="left">Female</td>
<td align="left">2019-06-12-14-07-17</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0.5574895</td>
<td align="left">right</td>
<td align="left">stripes-8</td>
<td align="left">stripes-4</td>
<td align="left">right</td>
<td align="left">right</td>
<td align="right">0.2636357</td>
<td align="right">0.3036911</td>
</tr>
</tbody>
</table>
<div class="infobox practice">
<p>Do exercise 6.</p>
</div>
</div>
<div id="missing-data" class="section level2" number="9.6">
<h2><span class="header-section-number">9.6</span> Missing data</h2>
<p>Sometimes data is missing. It can be missing <em>explicitly</em> with <code>NA</code> standing for <code>Not Available</code> / <code>Missing</code> data. Or, it can be missing <em>implicitly</em> when there is simply no entry for a particular condition. In the latter case, the strategy is to make missing values explicit first (discussed below). When you have missing values, represented by <code>NA</code> in R, you must decide how to deal with them: you can use this information directly as missing data can be diagnostic in itself, you can impute it using either a sophisticated statistical methods or via a simple average/default value strategy, or you can exclude them from the analysis.</p>
<p>To make implicit missing data explicit, <em>tidyr</em> provides function <a href="https://tidyr.tidyverse.org/reference/complete.html">complete()</a> that figures out all combinations of values for columns that you specified, finds missing combinations and adds with using <code>NA</code> or a specified default value. Imagine our toy table was incomplete (no data for Participant <code>1</code> and Face <code>Female-02</code>)</p>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Female-01</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">Female-02</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">Female-01</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>We can complete that table</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="seminar09.html#cb359-1" aria-hidden="true" tabindex="-1"></a>incomplete_df <span class="sc">%&gt;%</span></span>
<span id="cb359-2"><a href="seminar09.html#cb359-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(Participant, Face)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Female-01</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">Female-02</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">Female-01</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Female-02</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>We could also supply default values via <code>fill</code> parameter that takes a named list<a href="#fn49" class="footnote-ref" id="fnref49"><sup>49</sup></a> <code>list(column_name = default_value)</code>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Female-01</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">Female-02</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">Female-01</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Female-02</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>There are two approaches on excluding missing values. You can exclude all incomplete rows which have missing values in <em>any</em> variable via <a href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/na.fail.html">na.omit()</a> (base R function) or <a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na()</a> (<em>tidyr</em> package function). Or you can exclude rows only if they have <code>NA</code> in a specific columns by specifying their names.</p>
<p>For a table you see below</p>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="right">6</td>
<td align="right">NA</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="right">NA</td>
<td align="right">7</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>First, we can ensure only complete cases</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="seminar09.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="fu">na.omit</span>(widish_df_with_NA)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="seminar09.html#cb361-1" aria-hidden="true" tabindex="-1"></a>widish_df_with_NA <span class="sc">%&gt;%</span></span>
<span id="cb361-2"><a href="seminar09.html#cb361-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>Second, we drop rows only if <code>Attractiveness</code> data is missing.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="seminar09.html#cb362-1" aria-hidden="true" tabindex="-1"></a>widish_df_with_NA <span class="sc">%&gt;%</span></span>
<span id="cb362-2"><a href="seminar09.html#cb362-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(Attractiveness)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="right">NA</td>
<td align="right">7</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>Practice time. Create you own table with missing values and exclude missing values using <code>na.omit()</code> and <code>na_drop()</code>.</p>
<div class="infobox practice">
<p>Do exercise 7.</p>
</div>
<p><code>na_drop</code> is a very convenient function but you can replicate it functionality using <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/NA.html">is.na()</a> in combination with <a href="#filter">filter</a> dplyr function or logical indexing. Implement code that excludes rows if they contain <code>NA</code> in a specific column using these two approaches.</p>
<div class="infobox practice">
<p>Do exercise 8.</p>
</div>
<p>Now, implement code that uses logical indexing as a <a href="#seminar05">function</a> that takes <code>data.frame</code> (table) as a first argument and name a of a single column as a second, filters out rows with <code>NA</code> in that column and return the table back.</p>
<div class="infobox practice">
<p>Do exercise 9.</p>
</div>
<p>As noted above, you can also impute values. The simplest strategy is to use either a fixed or an average (mean, median, etc.) value. <em>tidyr</em> function that performs a simple substitution is <a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na()</a><a href="#fn50" class="footnote-ref" id="fnref50"><sup>50</sup></a> and, as a second parameter, it takes a named list of values <code>list(column_name = value_for_NA)</code>. For our toy table, we can replace missing <code>Attractiveness</code> and <code>Symmetry</code> values with some default value, e.g. <code>0</code> and <code>-1</code> (this is very arbitrary, just to demonstrate how it works!)</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="seminar09.html#cb363-1" aria-hidden="true" tabindex="-1"></a>widish_df_with_NA <span class="sc">%&gt;%</span></span>
<span id="cb363-2"><a href="seminar09.html#cb363-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">Attractiveness =</span> <span class="dv">0</span>, <span class="at">Symmetry =</span> <span class="sc">-</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb363-3"><a href="seminar09.html#cb363-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Participant</th>
<th align="left">Face</th>
<th align="right">Symmetry</th>
<th align="right">Attractiveness</th>
<th align="right">Trustworthiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M-1</td>
<td align="right">6</td>
<td align="right">0</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M-2</td>
<td align="right">-1</td>
<td align="right">7</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M-1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M-2</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>Unfortunately, <code>replace_na()</code> works only with constant values and does not handle grouped tables very well<a href="#fn51" class="footnote-ref" id="fnref51"><sup>51</sup></a> So to replace an <code>NA</code> with a mean value of a grouped data, we need to combine some of our old knowledge with an <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/ifelse.html">ifelse(conditon, value_if_true, value_if_false)</a> function. Here is how it works to replace all negative values in a vector with a <code>0</code> and all non-negative with <code>1</code>:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="seminar09.html#cb364-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb364-2"><a href="seminar09.html#cb364-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(v <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 0 1 1 0 1</code></pre>
<p>It works <em>per element</em> and you can use original values themselves. Here is how to replace only negative values but keep the positive ones:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="seminar09.html#cb366-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb366-2"><a href="seminar09.html#cb366-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(v <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="dv">0</span>, v)</span></code></pre></div>
<pre><code>## [1] 0 3 5 0 5</code></pre>
<p>We, essentially, tell the function, “if the condition is false, use the original value.” Now, your turn! Using the same vector and <code>ifelse()</code> function, replace negative values with a <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Extremes.html">maximal</a> value of the vector. I know it is <code>5</code> but you cannot hardcode it, that’s the point of the exercise!</p>
<div class="infobox practice">
<p>Do exercise 10.</p>
</div>
<p>Now that you know how to use <code>ifelse()</code>, replacing <code>NA</code> with a mean will be (relatively) easy. Use <a href="data/adaptation_with_na.csv">adaptation_with_na</a> table and replace missing information using participant-specific mean. This is the same table as above, so you need to compute <code>Psame</code> first. However, missing values in <code>Nsame</code> and <code>Ntotal</code> will result in <code>NA</code> for a corresponding <code>Psame</code>. Replace them with mean <code>Psame</code> <em>per participant</em>. This will require knowledge of additional details. First, you can compute <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/mean.html">mean()</a> ignoring any <code>NA</code> using <code>na.rm</code> parameter. Second, you will need to use <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/NA.html">is.na()</a> to detect values that you need to replace with the mean. Third, reminder, in order to apply some function per participant (stimulus, etc.), you need to first <a href="https://dplyr.tidyverse.org/reference/group_by.html">group</a> your data. This entire computation should be implemented as a single pipeline.</p>
<p>This is how the original table with missing values looks like (arranged by <code>Prime</code> and <code>Probe</code>)</p>
<table>
<thead>
<tr class="header">
<th align="left">Participant</th>
<th align="left">Prime</th>
<th align="left">Probe</th>
<th align="right">Nsame</th>
<th align="right">Ntotal</th>
<th align="right">Psame</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ma2</td>
<td align="left">Dual</td>
<td align="left">Dual</td>
<td align="right">32</td>
<td align="right">120</td>
<td align="right">0.2666667</td>
</tr>
<tr class="even">
<td align="left">sp2</td>
<td align="left">Dual</td>
<td align="left">Dual</td>
<td align="right">NA</td>
<td align="right">120</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">ma2</td>
<td align="left">Dual</td>
<td align="left">Quadro</td>
<td align="right">NA</td>
<td align="right">116</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">sp2</td>
<td align="left">Dual</td>
<td align="left">Quadro</td>
<td align="right">9</td>
<td align="right">120</td>
<td align="right">0.0750000</td>
</tr>
</tbody>
</table>
<p>And here is the same table with imputed participant mean (I show it in a separate column just so you can see when it has been imputed)</p>
<table>
<thead>
<tr class="header">
<th align="left">Participant</th>
<th align="left">Prime</th>
<th align="left">Probe</th>
<th align="right">Nsame</th>
<th align="right">Ntotal</th>
<th align="right">Psame</th>
<th align="right">Pavg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ma2</td>
<td align="left">Dual</td>
<td align="left">Dual</td>
<td align="right">32</td>
<td align="right">120</td>
<td align="right">0.2666667</td>
<td align="right">0.3223209</td>
</tr>
<tr class="even">
<td align="left">sp2</td>
<td align="left">Dual</td>
<td align="left">Dual</td>
<td align="right">NA</td>
<td align="right">120</td>
<td align="right">0.2120287</td>
<td align="right">0.2120287</td>
</tr>
<tr class="odd">
<td align="left">ma2</td>
<td align="left">Dual</td>
<td align="left">Quadro</td>
<td align="right">NA</td>
<td align="right">116</td>
<td align="right">0.3223209</td>
<td align="right">0.3223209</td>
</tr>
<tr class="even">
<td align="left">sp2</td>
<td align="left">Dual</td>
<td align="left">Quadro</td>
<td align="right">9</td>
<td align="right">120</td>
<td align="right">0.0750000</td>
<td align="right">0.2120287</td>
</tr>
</tbody>
</table>
<div class="infobox practice">
<p>Do exercise 11.</p>
</div>
<p>Great work!</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="47">
<li id="fn47"><p>By the way, this simple math check may seem as a trivial point but this is a kind of simple sanity check that you should perform routinely. This way you <em>know</em> rather than <em>hope</em> that transformation did what it should. I also check value is a few rows to make sure that I didn’t mess things up. Catching simple errors early saves you a lot of time!<a href="seminar09.html#fnref47" class="footnote-back">↩︎</a></p></li>
<li id="fn48"><p>I used table as an explicit first argument for <code>pivot_longer()</code> but piped it to <code>pivot_wider()</code>, why? To remind you that these two ways are the interchangeable and that both put the table as a parameter into the function.<a href="seminar09.html#fnref48" class="footnote-back">↩︎</a></p></li>
<li id="fn49"><p>Lists are like vectors that you know but they can hold values of any type without auto-converting them. <code>data.frame</code> is a list, tibble is a list, most of things that are not a vector are lists.<a href="seminar09.html#fnref49" class="footnote-back">↩︎</a></p></li>
<li id="fn50"><p>There is also an inverse function <a href="https://dplyr.tidyverse.org/reference/na_if.html">na_if()</a> that converts a specific value to an <code>NA</code>.<a href="seminar09.html#fnref50" class="footnote-back">↩︎</a></p></li>
<li id="fn51"><p>At least I wasn’t able to figure out how to do this.<a href="seminar09.html#fnref51" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="seminar08.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="seminar10.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["data-analysis-using-r-for-psychology.pdf", "data-analysis-using-r-for-psychology.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
